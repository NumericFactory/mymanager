{"version":3,"sources":["utilities.js","jquery.niftymodals.min.js","jquery.gritter.js","main.js","customer.js","perso.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9PA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/**\r\nEnvironnement\r\nRôle : Déterminer l'environnement de production ou local\r\n*/\r\nvar env = {\r\n  dev : \"http://localhost:8000/\", \r\n  prod : \"https://facturehero.com/\"\r\n};\r\nvar environnement = env.dev;\r\n\r\nvar displayUppercase = function ($element) {\r\n  if ($element.val()) {\r\n    $element.css('text-transform', 'uppercase');\r\n  } else {\r\n    $element.css('text-transform', 'none');\r\n  }\r\n};\r\n$.fn.displayAsUppercase = function() {\r\n  $(this).each(function() {\r\n    var $element = $(this);\r\n    displayUppercase($element);\r\n    $element.on('input', function(){displayUppercase($element)});\r\n  });\r\n  return this;\r\n}\r\n\r\n/**\r\n    Fonction de Vérification IBAN\r\n**/\r\n/*\r\n * Returns 1 if the IBAN is valid \r\n * Returns FALSE if the IBAN's length is not as should be (for CY the IBAN Should be 28 chars long starting with CY )\r\n * Returns any other number (checksum) when the IBAN is invalid (check digits do not match)\r\n*/\r\nfunction isValidIBANNumber(input) {\r\n  var CODE_LENGTHS = {\r\n      AD: 24, AE: 23, AT: 20, AZ: 28, BA: 20, BE: 16, BG: 22, BH: 22, BR: 29,\r\n      CH: 21, CR: 21, CY: 28, CZ: 24, DE: 22, DK: 18, DO: 28, EE: 20, ES: 24,\r\n      FI: 18, FO: 18, FR: 27, GB: 22, GI: 23, GL: 18, GR: 27, GT: 28, HR: 21,\r\n      HU: 28, IE: 22, IL: 23, IS: 26, IT: 27, JO: 30, KW: 30, KZ: 20, LB: 28,\r\n      LI: 21, LT: 20, LU: 20, LV: 21, MC: 27, MD: 24, ME: 22, MK: 19, MR: 27,\r\n      MT: 31, MU: 30, NL: 18, NO: 15, PK: 24, PL: 28, PS: 29, PT: 25, QA: 29,\r\n      RO: 24, RS: 22, SA: 24, SE: 24, SI: 19, SK: 24, SM: 27, TN: 24, TR: 26\r\n  };\r\n  var iban = String(input).toUpperCase().replace(/[^A-Z0-9]/g, ''), // keep only alphanumeric characters\r\n          code = iban.match(/^([A-Z]{2})(\\d{2})([A-Z\\d]+)$/), // match and capture (1) the country code, (2) the check digits, and (3) the rest\r\n          digits;\r\n  // check syntax and length\r\n  if (!code || iban.length !== CODE_LENGTHS[code[1]]) {\r\n      return false;\r\n  }\r\n  // rearrange country code and check digits, and convert chars to ints\r\n  digits = (code[3] + code[1] + code[2]).replace(/[A-Z]/g, function (letter) {\r\n      return letter.charCodeAt(0) - 55;\r\n  });\r\n  // final check\r\n  return mod97(digits);\r\n}\r\n\r\nfunction mod97(string) {\r\n  var checksum = string.slice(0, 2), fragment;\r\n  for (var offset = 2; offset < string.length; offset += 7) {\r\n      fragment = String(checksum) + string.substring(offset, offset + 7);\r\n      checksum = parseInt(fragment, 10) % 97;\r\n  }\r\n  return checksum;\r\n}\r\n\r\n/*jQuery(function ($) {\r\n  $( document ).ready(function() { \r\n*/\r\n\r\n    /*\r\n    **  Function isOnScreen()\r\n    **  Retourne True si Elt est visible dans l’écren, False sinon\r\n    */\r\n    /*$.fn.isOnScreen = function(){\r\n      var win = $(window);\r\n      var viewport = {\r\n        top : win.scrollTop(),\r\n        left : win.scrollLeft()\r\n      };\r\n      viewport.right = viewport.left + win.width();\r\n      viewport.bottom = viewport.top + win.height();\r\n      var bounds = this.offset();\r\n      bounds.right = bounds.left + this.outerWidth();\r\n      bounds.bottom = bounds.top + this.outerHeight();\r\n      return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));\r\n    };\r\n\r\n  });\r\n});*/\r\n\r\nfunction saveWithAjax(theForm, theFormData, elt) {\r\n    elt = elt || null;\r\n    // spinner indicator loading\r\n    var spinnerLoadingElt = \"<i class='fa fa-spinner fa-spin switch-spinner'></i>\";\r\n    if($('i.fa-spinner').length){$('i.fa-spinner').remove();}\r\n\r\n    if(elt!=null) {\r\n      // Si le user a clické sur une checkbox on fait apparaître le loader dans le label\r\n      if($(elt).parent().is('div.am-checkbox')) {\r\n        $(elt).attr('disabled','disabled');\r\n        $(elt).parent().find('label').append(spinnerLoadingElt);\r\n      }\r\n      // Sinon on fait apparaître le loader après l'élément\r\n      else{\r\n        $(elt).attr('disabled','disabled');  \r\n        $(elt).parent().after(spinnerLoadingElt);\r\n      }\r\n    }   \r\n    /**\r\n   *  $.ajaxSetup({\r\n   *    headers: {\r\n   *     'Authorization':'Basic xxxxxxxxxxxxx',\r\n   *     'X_CSRF_TOKEN':token,\r\n   *     'Content-Type':'application/json'\r\n   *   }\r\n   *  });\r\n  */\r\n\r\n  /**\r\n   *  OU SETUP AJAX CSRF\r\n   *\r\n   *  $.ajaxSetup({\r\n   *   headers: {\r\n   *       'X-CSRF-TOKEN': token\r\n   *   }\r\n   * });\r\n  */\r\n  // loader.removeClass(\"hidden\");\r\n  // Requête AJAX POST\r\n\r\n  $.ajax({\r\n    headers: {\"X-CSRF-TOKEN\":theFormData.token},\r\n    url: theForm.action,\r\n    method: 'POST',\r\n    dataType: 'JSON', // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    data : theFormData,\r\n    contentType: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    processData: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    cache: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    // OU\r\n    // data: {\r\n    //     '_method': 'POST',\r\n    //     '_token': token, // permet de vérifier le token en l'envoyant dans la requête dans App/Http/Middleware/VerifyCsrfToken\r\n    //     '_file' : {\r\n    //         \"name\" : file_data.name,\r\n    //         \"size\" : file_data.size,\r\n    //         \"type\" : file_data.type\r\n    //     }\r\n    // },\r\n    success: function(response, status, xhr) {\r\n      $('.errors').empty();\r\n      $('.gritter-item-wrapper').remove();\r\n\r\n      if( status == \"success\" ) {\r\n          if($('.fa-spinner').length) {$('.fa-spinner').fadeOut(); $('.fa-spinner').remove();}\r\n          $(elt).removeAttr('disabled');\r\n\r\n          if(response.token_mismatch) { \r\n            setTimeout(function(){ return window.location = environnement + 'login'; }, 3000);\r\n          }\r\n\r\n          if(response.status == \"success\") {\r\n            if(response.hasOwnProperty('customerid')) {\r\n              // console.log(response.customerid);\r\n              document.getElementById('customercreatestep1').setAttribute('data-customerid', response.customerid);\r\n              document.getElementById('customercreatestep2').setAttribute('data-customerid', response.customerid);\r\n              document.getElementById('customercreatestep3').setAttribute('data-customerid', response.customerid);\r\n            }\r\n            if(response.hasOwnProperty('customercode')) {\r\n              if(document.querySelector('meta[name=\"customercode\"]') == null) {\r\n                $('head').append('<meta name=\"customercode\" content=\"'+response.customercode+'\">');\r\n              }     \r\n            }\r\n            var id = $(theForm).find('button.wizard-next').data(\"wizard\");\r\n            $(id).wizard('next');\r\n\r\n            $.gritter.add({\r\n              title: '<i style=\"color:#8DCADF\" class=\"fa fa-check-circle\"></i> OK !',\r\n              text: response.message,\r\n              //image: App.conf.assetsPath + '/' +  App.conf.imgPath + '/gh-icon.png',\r\n              class_name: 'color github'\r\n            });\r\n            // swal({title: 'Oups', text: response.message, type:response.status, timer: 1400, showConfirmButton: false});\r\n          }\r\n          else {    \r\n              // Message de succès\r\n              //swal({title: xhr.statusText, text: response.message, type:'success', timer: 1400, showConfirmButton: false});\r\n          }\r\n\r\n      }\r\n      else {\r\n          //swal('Oups...', 'une erreur est survenue. Réessayez!', 'error');\r\n          //console.log(response);\r\n          //console.log(status);\r\n          //console.log(xhr);\r\n       }\r\n       \r\n    }, // FIN success\r\n    error: function(xhr) {\r\n      // console.log (xhr);\r\n      var errors;\r\n      if(xhr.responseText.length) {errors = $.parseJSON(xhr.responseText);} else {errors=null};\r\n      // console.log(errors);\r\n      switch(xhr.status) {\r\n        case 403:\r\n          $('.gritter-item-wrapper').remove();\r\n          $.gritter.add({\r\n          title: '<i style=\"color:#8DCADF\" class=\"fa fa-times-circle\"></i> OOPS !',\r\n          text: 'Action non autorisée.',\r\n          //image: App.conf.assetsPath + '/' +  App.conf.imgPath + '/gh-icon.png',\r\n          class_name: 'color primary'\r\n          });\r\n        break;\r\n        case 422:\r\n        $('.gritter-item-wrapper').remove();\r\n        $.gritter.add({\r\n          title: '<i style=\"color:#8DCADF\" class=\"fa fa-times-circle\"></i> Oups !',\r\n          text: 'Corrigez vos erreurs.',\r\n          //image: App.conf.assetsPath + '/' +  App.conf.imgPath + '/gh-icon.png',\r\n          class_name: 'color primary'\r\n        });\r\n        // console.log(errors);\r\n        $('.errors').empty();\r\n        if(\"civility\" in errors) {\r\n            var errCivility = document.querySelector('select[name=\"civility\"]').parentNode.parentNode.querySelector('.errors');\r\n            errCivility.innerHTML += errors.civility;\r\n        }\r\n        if(\"city\" in errors) {\r\n            var errAddress = document.getElementById(\"autocomplete\").parentNode.parentNode.querySelector('.errors');\r\n            errAddress.innerHTML += \"<i class='fa fa-close'></i> Sélectionner une adresse dans le menu déroulant.\";\r\n        }\r\n        if(\"companytype\" in errors) {\r\n            var errCompanytype = document.querySelector('select[name=\"companytype\"]').parentNode.parentNode.parentNode.querySelector('.errors');\r\n            errCompanytype.innerHTML += errors.companytype;\r\n        }\r\n        if(\"customertype\" in errors) {\r\n            var errCustomertype = document.querySelector('select[name=\"customertype\"]').parentNode.parentNode.parentNode.querySelector('.errors');\r\n            errCustomertype.innerHTML += errors.customertype;\r\n        }\r\n        $.each(errors, function(index, value) {\r\n            // Si l'index de l'erreur est civility ou city ou companytype ou customer type, elles sont traitées au dessus\r\n            if(index=='civility' || index=='city' || index=='companytype' || index=='customertype') {return false}\r\n            // Selection de la div.errors sous l'input\r\n            var errBlock = document.querySelector('input[name='+index+']').parentNode.parentNode.querySelector('.errors')\r\n            errBlock.innerHTML += value;\r\n        });    \r\n        break;\r\n        default:\r\n       }\r\n    } // FIN error\r\n  }); \r\n}","/*!\n * jquery.niftymodals v1.3.1 (https://github.com/foxythemes/jquery-niftymodals)\n * Copyright 2016 Codrops <www.codrops.com> and Foxy Themes \n * Licensed under Codrops license http://tympanus.net/codrops/licensing/ \n */\n\n!function(a){\"use strict\";var b={closeSelector:\".md-close\",contentSelector:\".md-content\",classAddAfterOpen:\"md-show\",classScrollbarMeasure:\"md-scrollbar-measure\",classModalOpen:\"md-open\",data:!1,buttons:!1,beforeOpen:!1,afterOpen:!1,beforeClose:!1,afterClose:!1};a.fn.niftyModal=function(c){var d,e,f,g={},h={},i=a(\"body\"),j={removeModal:function(b){var c=a(b);c.removeClass(g.classAddAfterOpen),c.css({perspective:\"1300px\"}),i.removeClass(g.classModalOpen),j.resetScrollbar(),c.trigger(\"hide\")},showModal:function(b){var c=a(b),d=a(g.closeSelector,b);return(\"function\"!=typeof g.beforeOpen||g.beforeOpen(h)!==!1)&&(j.checkScrollbar(),j.setScrollbar(),c.addClass(g.classAddAfterOpen),i.addClass(g.classModalOpen),a(c).on(\"click\",function(b){var d=a(g.contentSelector,c),e=a(g.closeSelector,c);if(!a(b.target).closest(d).length&&i.hasClass(g.classModalOpen)){if(\"function\"==typeof g.beforeClose&&g.beforeClose(h,b)===!1)return!1;j.removeModal(c),e.off(\"click\"),\"function\"==typeof g.afterClose&&g.afterClose(h,b)}}),\"function\"==typeof g.afterOpen&&g.afterOpen(h),setTimeout(function(){c.css({perspective:\"none\"})},500),d.on(\"click\",function(c){var e=a(this);if(h.closeEl=d.get(0),\"function\"==typeof g.beforeClose&&g.beforeClose(h,c)===!1)return!1;if(g.buttons&&a.isArray(g.buttons)){var f=!0;if(a.each(g.buttons,function(a,b){e.hasClass(b.class)&&\"function\"==typeof b.callback&&(f=b.callback(e.get(0),h,c))}),f===!1&&void 0!==typeof f)return!1}j.removeModal(b),d.off(\"click\"),\"function\"==typeof g.afterClose&&g.afterClose(h,c),c.stopPropagation()}),void c.trigger(\"show\"))},measureScrollbar:function(){var a=document.createElement(\"div\");a.className=g.classScrollbarMeasure,i.append(a);var b=a.offsetWidth-a.clientWidth;return i[0].removeChild(a),b},checkScrollbar:function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}d=document.body.clientWidth<a,e=j.measureScrollbar()},setScrollbar:function(){var a=parseInt(i.css(\"padding-right\")||0,10);f=document.body.style.paddingRight||\"\",d&&i.css(\"padding-right\",a+e)},resetScrollbar:function(){i.css(\"padding-right\",f)}},k={init:function(c){return this.each(function(){g=a.extend({},b,c),h.modalEl=this,g.data!==!1&&(h.data=c.data),j.showModal(this)})},toggle:function(c){return this.each(function(){g=a.extend({},b,c);var d=a(this);d.hasClass(g.classAddAfterOpen)?j.removeModal(d):j.showModal(d)})},show:function(c){return g=a.extend({},b,c),this.each(function(){var b=a(this);j.showModal(b)})},hide:function(c){return g=a.extend({},b,c),this.each(function(){j.removeModal(a(this))})},setDefaults:function(c){b=a.extend({},b,c)},getDefaults:function(){return b}};return k[c]?k[c].apply(this,Array.prototype.slice.call(arguments,1)):\"object\"!=typeof c&&c?void a.error('Method \"'+c+'\" does not exist in niftyModal plugin!'):k.init.apply(this,arguments)}}(jQuery),$(\".md-trigger\").on(\"click\",function(){var a=$(this).data(\"modal\");$(\"#\"+a).niftyModal()});","/*\n * Gritter for jQuery\n * https://github.com/foxythemes/Gritter\n *\n * Copyright (c) 2015 Foxy Themes\n * Copyright (c) 2012 Jordan Boesch\n * Dual licensed under the MIT and GPL licenses.\n *\n * Date: July 28, 2015\n * Version: 1.7.5\n */\n\n(function($){\n \t\n\t/**\n\t* Set it up as an object under the jQuery namespace\n\t*/\n\t$.gritter = {};\n\t\n\t/**\n\t* Set up global options that the user can over-ride\n\t*/\n\t$.gritter.options = {\n\t\tposition: '',\n\t\tclass_name: '', // could be set to 'gritter-light' to use white notifications\n\t\tfade_in_speed: 100, // how fast notifications fade in\n\t\tfade_out_speed: 1000, // how fast the notices fade out\n\t\ttime: 6000 // hang on the screen for...\n\t}\n\t\n\t/**\n\t* Add a gritter notification to the screen\n\t* @see Gritter#add();\n\t*/\n\t$.gritter.add = function(params){\n\n\t\ttry {\n\t\t\treturn Gritter.add(params || {});\n\t\t} catch(e) {\n\t\t\n\t\t\tvar err = 'Gritter Error: ' + e;\n\t\t\t(typeof(console) != 'undefined' && console.error) ? \n\t\t\t\tconsole.error(err, params) : \n\t\t\t\talert(err);\n\t\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t* Remove a gritter notification from the screen\n\t* @see Gritter#removeSpecific();\n\t*/\n\t$.gritter.remove = function(id, params){\n\t\tGritter.removeSpecific(id, params || {});\n\t}\n\t\n\t/**\n\t* Remove all notifications\n\t* @see Gritter#stop();\n\t*/\n\t$.gritter.removeAll = function(params){\n\t\tGritter.stop(params || {});\n\t}\n\t\n\t/**\n\t* Big fat Gritter object\n\t* @constructor (not really since its object literal)\n\t*/\n\tvar Gritter = {\n\t\t\n\t\t// Public - options to over-ride with $.gritter.options in \"add\"\n\t\tposition: '',\n\t\tfade_in_speed: '',\n\t\tfade_out_speed: '',\n\t\ttime: '',\n\t\t\n\t\t// Private - no touchy the private parts\n\t\t_custom_timer: 0,\n\t\t_item_count: 0,\n\t\t_is_setup: 0,\n\t\t_tpl_close: '<a class=\"gritter-close\" href=\"#\" tabindex=\"1\">Close Notification</a>',\n\t\t_tpl_title: '<span class=\"gritter-title\">[[title]]</span>',\n\t\t_tpl_item: '<div id=\"gritter-item-[[number]]\" class=\"gritter-item-wrapper [[item_class]]\" style=\"display:none\" role=\"alert\"><div class=\"gritter-item\">[[image]]<div class=\"gritter-content [[class_name]]\">[[close]][[title]]<p>[[text]]</p></div></div></div>',\n\t\t_tpl_wrap: '<div id=\"gritter-notice-wrapper\" class=\"gritter-main-wrapper\"></div>',\n\t\t\n\t\t/**\n\t\t* Add a gritter notification to the screen\n\t\t* @param {Object} params The object that contains all the options for drawing the notification\n\t\t* @return {Integer} The specific numeric id to that gritter notification\n\t\t*/\n\t\tadd: function(params){\n\t\t\t// Handle straight text\n\t\t\tif(typeof(params) == 'string'){\n\t\t\t\tparams = {text:params};\n\t\t\t}\n\n\t\t\t// We might have some issues if we don't have a title or text!\n\t\t\tif(params.text === null){\n\t\t\t\tthrow 'You must supply \"text\" parameter.'; \n\t\t\t}\n\t\t\t\n\t\t\t// Check the options and set them once\n\t\t\tif(!this._is_setup){\n\t\t\t\tthis._runSetup();\n\t\t\t}\n\t\t\t\n\t\t\t// Basics\n\t\t\tvar title = params.title, \n\t\t\t\ttext = params.text,\n\t\t\t\timage = params.image || '',\n\t\t\t\tsticky = params.sticky || false,\n\t\t\t\titem_class = params.class_name || $.gritter.options.class_name,\n\t\t\t\tposition = $.gritter.options.position,\n\t\t\t\ttime_alive = params.time || '';\n\n\t\t\tthis._verifyWrapper();\n\t\t\t\n\t\t\tthis._item_count++;\n\t\t\tvar number = this._item_count, \n\t\t\t\ttmp = this._tpl_item;\n\t\t\t\n\t\t\t// Assign callbacks\n\t\t\t$(['before_open', 'after_open', 'before_close', 'after_close']).each(function(i, val){\n\t\t\t\tGritter['_' + val + '_' + number] = ($.isFunction(params[val])) ? params[val] : function(){}\n\t\t\t});\n\n\t\t\t// Reset\n\t\t\tthis._custom_timer = 0;\n\t\t\t\n\t\t\t// A custom fade time set\n\t\t\tif(time_alive){\n\t\t\t\tthis._custom_timer = time_alive;\n\t\t\t}\n\t\t\t\n\t\t\tvar image_str = (image != '') ? '<div class=\"gritter-img-container\"><img src=\"' + image + '\" class=\"gritter-image\" /></div>' : '',\n\t\t\t\tclass_name = (image != '') ? 'gritter-with-image' : 'gritter-without-image';\n\t\t\t\n\t\t\t// String replacements on the template\n\t\t\tif(title){\n\t\t\t\ttitle = this._str_replace('[[title]]',title,this._tpl_title);\n\t\t\t}else{\n\t\t\t\ttitle = '';\n\t\t\t}\n\t\t\t\n\t\t\ttmp = this._str_replace(\n\t\t\t\t['[[title]]', '[[text]]', '[[close]]', '[[image]]', '[[number]]', '[[class_name]]', '[[item_class]]'],\n\t\t\t\t[title, text, this._tpl_close, image_str, this._item_count, class_name, item_class], tmp\n\t\t\t);\n\n\t\t\t// If it's false, don't show another gritter message\n\t\t\tif(this['_before_open_' + number]() === false){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$('#gritter-notice-wrapper').addClass(position).append(tmp);\n\t\t\t\n\t\t\tvar item = $('#gritter-item-' + this._item_count);\n\t\t\t\n\t\t\titem.fadeIn(this.fade_in_speed, function(){\n\t\t\t\tGritter['_after_open_' + number]($(this));\n\t\t\t\titem.animate({ right: \"350\" }, 'medium');\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t\tif(!sticky){\n\t\t\t\tthis._setFadeTimer(item, number);\n\t\t\t}\n\t\t\t\n\t\t\t// Bind the hover/unhover states\n\t\t\t$(item).bind('mouseenter mouseleave', function(event){\n\t\t\t\tif(event.type == 'mouseenter'){\n\t\t\t\t\tif(!sticky){ \n\t\t\t\t\t\tGritter._restoreItemIfFading($(this), number);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif(!sticky){\n\t\t\t\t\t\tGritter._setFadeTimer($(this), number);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tGritter._hoverState($(this), event.type);\n\t\t\t});\n\t\t\t\n\t\t\t// Clicking (X) makes the perdy thing close\n\t\t\t$(item).find('.gritter-close').click(function(){\n\t\t\t\tGritter.removeSpecific(number, {}, null, true);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\t\n\t\t\treturn number;\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* If we don't have any more gritter notifications, get rid of the wrapper using this check\n\t\t* @private\n\t\t* @param {Integer} unique_id The ID of the element that was just deleted, use it for a callback\n\t\t* @param {Object} e The jQuery element that we're going to perform the remove() action on\n\t\t* @param {Boolean} manual_close Did we close the gritter dialog with the (X) button\n\t\t*/\n\t\t_countRemoveWrapper: function(unique_id, e, manual_close){\n\t\t\t\n\t\t\t// Remove it then run the callback function\n\t\t\te.remove();\n\t\t\tthis['_after_close_' + unique_id](e, manual_close);\n\t\t\t\n\t\t\t// Check if the wrapper is empty, if it is.. remove the wrapper\n\t\t\tif($('.gritter-item-wrapper').length == 0){\n\t\t\t\t$('#gritter-notice-wrapper').remove();\n\t\t\t}\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Fade out an element after it's been on the screen for x amount of time\n\t\t* @private\n\t\t* @param {Object} e The jQuery element to get rid of\n\t\t* @param {Integer} unique_id The id of the element to remove\n\t\t* @param {Object} params An optional list of params to set fade speeds etc.\n\t\t* @param {Boolean} unbind_events Unbind the mouseenter/mouseleave events if they click (X)\n\t\t*/\n\t\t_fade: function(e, unique_id, params, unbind_events){\n\n\t\t\tvar params = params || {},\n\t\t\t\tfade = (typeof(params.fade) != 'undefined') ? params.fade : true,\n\t\t\t\tfade_out_speed = params.speed || this.fade_out_speed,\n\t\t\t\tmanual_close = unbind_events;\n\n\t\t\tthis['_before_close_' + unique_id](e, manual_close);\n\t\t\t\n\t\t\t// If this is true, then we are coming from clicking the (X)\n\t\t\tif(unbind_events){\n\t\t\t\te.unbind('mouseenter mouseleave');\n\t\t\t}\n\t\t\t\n\t\t\t// Fade it out or remove it\n\t\t\tif(fade){\n\t\t\t\n\t\t\t\te.animate({\n\t\t\t\t\topacity: 0\n\t\t\t\t}, fade_out_speed, function(){\n\t\t\t\t\te.animate({ height: 0 }, 300, function(){\n\t\t\t\t\t\tGritter._countRemoveWrapper(unique_id, e, manual_close);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tthis._countRemoveWrapper(unique_id, e);\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Perform actions based on the type of bind (mouseenter, mouseleave) \n\t\t* @private\n\t\t* @param {Object} e The jQuery element\n\t\t* @param {String} type The type of action we're performing: mouseenter or mouseleave\n\t\t*/\n\t\t_hoverState: function(e, type){\n\t\t\t\n\t\t\t// Change the border styles and add the (X) close button when you hover\n\t\t\tif(type == 'mouseenter'){\n\t\t\t\t\n\t\t\t\te.addClass('hover');\n\t\t\t\t\t\t\n\t\t\t}\n\t\t\t// Remove the border styles and hide (X) close button when you mouse out\n\t\t\telse {\n\t\t\t\t\n\t\t\t\te.removeClass('hover');\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Remove a specific notification based on an ID\n\t\t* @param {Integer} unique_id The ID used to delete a specific notification\n\t\t* @param {Object} params A set of options passed in to determine how to get rid of it\n\t\t* @param {Object} e The jQuery element that we're \"fading\" then removing\n\t\t* @param {Boolean} unbind_events If we clicked on the (X) we set this to true to unbind mouseenter/mouseleave\n\t\t*/\n\t\tremoveSpecific: function(unique_id, params, e, unbind_events){\n\t\t\t\n\t\t\tif(!e){\n\t\t\t\tvar e = $('#gritter-item-' + unique_id);\n\t\t\t}\n\n\t\t\t// We set the fourth param to let the _fade function know to \n\t\t\t// unbind the \"mouseleave\" event.  Once you click (X) there's no going back!\n\t\t\tthis._fade(e, unique_id, params || {}, unbind_events);\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* If the item is fading out and we hover over it, restore it!\n\t\t* @private\n\t\t* @param {Object} e The HTML element to remove\n\t\t* @param {Integer} unique_id The ID of the element\n\t\t*/\n\t\t_restoreItemIfFading: function(e, unique_id){\n\t\t\t\n\t\t\tclearTimeout(this['_int_id_' + unique_id]);\n\t\t\te.stop().css({ opacity: '', height: '' });\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Setup the global options - only once\n\t\t* @private\n\t\t*/\n\t\t_runSetup: function(){\n\t\t\n\t\t\tfor(opt in $.gritter.options){\n\t\t\t\tthis[opt] = $.gritter.options[opt];\n\t\t\t}\n\t\t\tthis._is_setup = 1;\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Set the notification to fade out after a certain amount of time\n\t\t* @private\n\t\t* @param {Object} item The HTML element we're dealing with\n\t\t* @param {Integer} unique_id The ID of the element\n\t\t*/\n\t\t_setFadeTimer: function(e, unique_id){\n\t\t\t\n\t\t\tvar timer_str = (this._custom_timer) ? this._custom_timer : this.time;\n\t\t\tthis['_int_id_' + unique_id] = setTimeout(function(){ \n\t\t\t\tGritter._fade(e, unique_id);\n\t\t\t}, timer_str);\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* Bring everything to a halt\n\t\t* @param {Object} params A list of callback functions to pass when all notifications are removed\n\t\t*/  \n\t\tstop: function(params){\n\t\t\t\n\t\t\t// callbacks (if passed)\n\t\t\tvar before_close = ($.isFunction(params.before_close)) ? params.before_close : function(){};\n\t\t\tvar after_close = ($.isFunction(params.after_close)) ? params.after_close : function(){};\n\t\t\t\n\t\t\tvar wrap = $('#gritter-notice-wrapper');\n\t\t\tbefore_close(wrap);\n\t\t\twrap.fadeOut(function(){\n\t\t\t\t$(this).remove();\n\t\t\t\tafter_close();\n\t\t\t});\n\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* An extremely handy PHP function ported to JS, works well for templating\n\t\t* @private\n\t\t* @param {String/Array} search A list of things to search for\n\t\t* @param {String/Array} replace A list of things to replace the searches with\n\t\t* @return {String} sa The output\n\t\t*/  \n\t\t_str_replace: function(search, replace, subject, count){\n\t\t\n\t\t\tvar i = 0, j = 0, temp = '', repl = '', sl = 0, fl = 0,\n\t\t\t\tf = [].concat(search),\n\t\t\t\tr = [].concat(replace),\n\t\t\t\ts = subject,\n\t\t\t\tra = r instanceof Array, sa = s instanceof Array;\n\t\t\ts = [].concat(s);\n\t\t\t\n\t\t\tif(count){\n\t\t\t\tthis.window[count] = 0;\n\t\t\t}\n\t\t\n\t\t\tfor(i = 0, sl = s.length; i < sl; i++){\n\t\t\t\t\n\t\t\t\tif(s[i] === ''){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (j = 0, fl = f.length; j < fl; j++){\n\t\t\t\t\t\n\t\t\t\t\ttemp = s[i] + '';\n\t\t\t\t\trepl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];\n\t\t\t\t\ts[i] = (temp).split(f[j]).join(repl);\n\t\t\t\t\t\n\t\t\t\t\tif(count && s[i] !== temp){\n\t\t\t\t\t\tthis.window[count] += (temp.length-s[i].length) / f[j].length;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn sa ? s : s[0];\n\t\t\t\n\t\t},\n\t\t\n\t\t/**\n\t\t* A check to make sure we have something to wrap our notices with\n\t\t* @private\n\t\t*/  \n\t\t_verifyWrapper: function(){\n\t\t  \n\t\t\tif($('#gritter-notice-wrapper').length == 0){\n\t\t\t\t$('body').append(this._tpl_wrap);\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t}\n\t\n})(jQuery);\n","/*!\r\n * amaretti v1.2.0 (http://foxythemes.net/themes/amaretti)\r\n * Copyright 2014-2016 Foxy Themes all rights reserved \r\n */\r\nvar App = (function () {\r\n  'use strict';\r\n\r\n  var totalPriceline;\r\n  var unitPriceline;\r\n  var qty;\r\n  var grandTotalHt;\r\n\r\n\r\nfunction calculateTotalPriceline(e) {\r\n  //e.preventDefault();\r\n  var thisinput = e.target.getAttribute('class');\r\n  var inputlinenumber = thisinput.split(' ')[1].split('-')[1];\r\n  // console.log(inputlinenumber); \r\n\r\n  // renvoie l1 pour la ligne1, l2 pour la ligne2, etc...\r\n \r\n  totalPriceline = document.querySelector('.totalrow-'+inputlinenumber);\r\n  //console.log(totalPriceline);\r\n  grandTotalHt = document.getElementById('grandtotalht');\r\n  //console.log(grandTotalHt);\r\n\r\n  // Si on est sur l'input \"quantité\"\r\n  if(e.target.getAttribute('class').split(' ')[0] =='qty') {\r\n    if(isNaN(e.target.value)) {\r\n      e.target.value='';\r\n    }\r\n    else {\r\n\r\n      if(document.querySelector(\".currency-\"+inputlinenumber).value.trim() != '') {\r\n        // var inputcurrvalue = e.target.value * (document.querySelector(\".currency-\"+inputlinenumber).value)\r\n        console.log(document.querySelector(\".currency-\"+inputlinenumber));\r\n        totalPriceline.innerHTML = (e.target.value * document.querySelector(\".currency-\"+inputlinenumber).value).toFixed(2).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1 \");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Si on est sur l'input \"prix unitaire\"\r\n  else if(e.target.getAttribute('class').split(' ')[0] == 'currency') {\r\n    if(isNaN(e.target.value)) {\r\n      e.target.value='';\r\n    }\r\n    else {\r\n      if(document.querySelector(\".qty-\"+inputlinenumber).value.trim() != '') {\r\n        totalPriceline.innerHTML = (e.target.value * document.querySelector(\".qty-\"+inputlinenumber).value).toFixed(2).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1 \");\r\n      }\r\n    }     \r\n  }\r\n\r\n  else {\r\n    // \r\n  }\r\n\r\n  var totalLines = document.getElementsByClassName('totalrow');\r\n  console.log(totalLines);\r\n  var grandTotalPrice=0;\r\n\r\n  for(var t=0; t<totalLines.length; t++) {\r\n    console.log(totalLines[t].innerHTML);\r\n      if (!isNaN(totalLines[t].innerHTML.replace(/ /g,''))) \r\n        grandTotalPrice += parseFloat(totalLines[t].innerHTML.replace(/ /g,'')); \r\n  }\r\n  console.log(grandTotalPrice);\r\n  grandTotalHt.innerHTML = grandTotalPrice.toFixed(2).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1 \");\r\n}\r\n\r\n\r\n\r\nfunction autosize(){\r\n  var el = this;\r\n  setTimeout(function(){\r\n    el.style.cssText = 'height:auto; padding:0';\r\n    // for box-sizing other than \"content-box\" use:\r\n    // el.style.cssText = '-moz-box-sizing:content-box';\r\n    el.style.cssText = 'height:' + el.scrollHeight + 'px';\r\n  },0);\r\n}\r\n\r\n\r\nfunction injectTemplate(template, targetParent, dict) {\r\n        var count = document.getElementsByClassName('mission-line').length;\r\n\r\n        var t = document.querySelector('#' + template);\r\n        var clone = t.cloneNode(true)\r\n        for (var key in dict) {\r\n            clone.innerHTML = clone.innerHTML.replace(key, dict[key])\r\n        }\r\n        var fragment = document.importNode(clone.content, true)\r\n        var canvas = document.querySelector('#' + targetParent);\r\n\r\n        fragment.querySelector('input.qty').classList.add('qty-l'+(count+1));\r\n        fragment.querySelector('input.currency').classList.add('currency-l'+(count+1));\r\n        fragment.querySelector('.totalrow').classList.add('totalrow-l'+(count+1));\r\n        canvas.appendChild(fragment);\r\n\r\n        for(var i=0; i<document.getElementsByClassName('qty').length; i++) {\r\n          document.getElementsByClassName('qty')[i].removeEventListener(\"keyup\", calculateTotalPriceline);\r\n          document.getElementsByClassName('qty')[i].addEventListener(\"keyup\", calculateTotalPriceline);\r\n        }\r\n        for(var i=0; i<document.getElementsByClassName('currency').length; i++) {\r\n          document.getElementsByClassName('currency')[i].removeEventListener(\"keyup\", calculateTotalPriceline);\r\n          document.getElementsByClassName('currency')[i].addEventListener(\"keyup\", calculateTotalPriceline);\r\n        }\r\n        //alert(canvas.innerHTML)\r\n}\r\n\r\nfunction injectNewLine() {\r\n  injectTemplate(\"template1\", \"linesInTbody\", {var1:\"1+1\", var2:2, \"#ref\":\"abc.net\"});\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n  var inputQty = document.querySelector('input.qty');\r\n  var inputUnitPriceline = document.querySelector('input.currency');\r\n\r\n  if(inputQty!=null) inputQty.addEventListener(\"change\", calculateTotalPriceline);\r\n  if(inputUnitPriceline!=null) inputUnitPriceline.addEventListener(\"change\", calculateTotalPriceline);\r\n  if(inputQty!=null) inputQty.addEventListener(\"keyup\", calculateTotalPriceline);\r\n  if(inputUnitPriceline!=null) inputUnitPriceline.addEventListener(\"keyup\", calculateTotalPriceline);\r\n  if(document.querySelector('textarea')!=null) document.querySelector('textarea').addEventListener('keydown', autosize);\r\n  if(document.querySelector('#addable-row')!=null) document.querySelector('#addable-row').addEventListener('click', injectNewLine);\r\n});\r\n\r\n\r\n  //Basic Config\r\n  var config = {\r\n    assetsPath: 'assets',\r\n    imgPath: 'img',\r\n    jsPath: 'js',\r\n    libsPath: 'lib',\r\n    leftSidebarSlideSpeed: 200,\r\n    enableSwipe: true,\r\n    swipeTreshold: 100,\r\n    scrollTop: true,\r\n    openLeftSidebarClass: 'open-left-sidebar',\r\n    openRightSidebarClass: 'open-right-sidebar',\r\n    removeLeftSidebarClass: 'am-nosidebar-left',\r\n    openLeftSidebarOnClick: false,\r\n    openLeftSidebarOnClickClass: 'am-left-sidebar--click',\r\n    transitionClass: 'am-animate',\r\n    openSidebarDelay: 400,\r\n    syncSubMenuOnHover: false\r\n  };\r\n\r\n  var colors = {};\r\n  var body, wrapper, leftSidebar, rightSidebar;\r\n  var openSidebar = false;\r\n\r\n  //Get the template css colors into js vars\r\n  function getColor( c ){\r\n    var tmp = $(\"<div>\", { class: c }).appendTo(\"body\");\r\n    var color = tmp.css(\"background-color\");\r\n    tmp.remove();\r\n\r\n    return color;\r\n  }\r\n\r\n  //Core private functions\r\n  function leftSidebarInit(){\r\n\r\n    var firstAnchor = $(\".sidebar-elements > li > a\", leftSidebar);\r\n    var openLeftSidebarOnClick = leftSidebar.hasClass( config.openLeftSidebarOnClickClass ) || config.openLeftSidebarOnClick ? true : false;\r\n\r\n    function syncSubMenu( item ){\r\n      var elements = $(\".sidebar-elements > li\", leftSidebar);\r\n\r\n      if( typeof item !== \"undefined\" ) {\r\n        elements = item;\r\n      }\r\n\r\n      $.each( elements, function(i, v){\r\n\r\n        var title = $(this).find(\"> a span\").html();\r\n        var ul = $(this).find(\"> ul\");\r\n        var subEls = $(\"> li\", ul);\r\n        var title = $('<li class=\"title\">' + title + '</li>');\r\n        var subContainer = $('<li class=\"nav-items\"><div class=\"am-scroller nano\"><div class=\"content nano-content\"><ul></ul></div></div></li>');\r\n\r\n        if( !ul.find(\"> li.title\").length > 0 ){\r\n         ul.prepend( title );\r\n          subEls.appendTo( subContainer.find(\".content ul\") );\r\n          subContainer.appendTo( ul );\r\n        }\r\n      });\r\n    }\r\n\r\n    /*Create sub menu elements*/\r\n      syncSubMenu();\r\n\r\n    function oSidebar(){\r\n      body.addClass( config.openLeftSidebarClass + \" \" + config.transitionClass );\r\n      openSidebar = true;\r\n    }\r\n\r\n    function cSidebar(){\r\n      body.removeClass( config.openLeftSidebarClass ).addClass( config.transitionClass );\r\n      sidebarDelay();\r\n    }\r\n\r\n    function openSubMenu( el, event, click ){\r\n      var li = $(el).parent();\r\n      var amScroller = li.find(\".am-scroller\");\r\n      var subMenu = li.find(\"> ul\");\r\n      var isOpen = li.hasClass('open');\r\n\r\n      //Show sub menu element\r\n      if( !$.isXs() ){\r\n        $(\"ul.visible\", leftSidebar).removeClass(\"visible\").parent().removeClass('open');\r\n\r\n        //Add classes to create a delay on sub menu close action after mouse leave\r\n        if( !click || ( click && !isOpen ) ){\r\n          li.addClass('open');\r\n          subMenu.addClass(\"visible\");\r\n        }\r\n        subMenu.removeClass(\"hide\");\r\n      }\r\n\r\n      //Renew nanoscroller\r\n      amScroller.nanoScroller({ destroy: true });\r\n      amScroller.nanoScroller();\r\n\r\n      //Check if event is click or hover\r\n      if( click ){\r\n        //Stop click event when li has sub-menu\r\n        if( li.hasClass('parent') ){\r\n          event.preventDefault();\r\n        }\r\n      }else{\r\n        //Create sub-menu elements\r\n        if( config.syncSubMenuOnHover ){\r\n          syncSubMenu( li );\r\n        }\r\n      }\r\n    }\r\n\r\n    /*Open-Sidebar when click on topbar button*/\r\n      $('.am-toggle-left-sidebar').on(\"click\", function(e){\r\n        if( openSidebar && body.hasClass( config.openLeftSidebarClass ) ){\r\n          cSidebar();\r\n        }else if( !openSidebar ){\r\n          oSidebar();\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      });\r\n\r\n    /*Close sidebar on click outside*/\r\n      $(document).on(\"touchstart mousedown\",function(e){\r\n        if ( !$(e.target).closest(leftSidebar).length && body.hasClass( config.openLeftSidebarClass ) ) {\r\n          cSidebar();\r\n        }else if( !$(e.target).closest(leftSidebar).length && !$.isXs() ){\r\n          $(\"ul.visible\", leftSidebar).removeClass(\"visible\").parent().removeClass('open');\r\n        }\r\n      });\r\n\r\n    /*Open sub-menu functionality*/\r\n      if( openLeftSidebarOnClick ){\r\n\r\n        /*Open sub-menu on click*/\r\n        firstAnchor.on('click',function( e ){\r\n          if( !$.isXs() ){\r\n            openSubMenu(this, e, true); \r\n          }\r\n        });\r\n\r\n      }else{\r\n\r\n        /*Open sub-menu on hover*/\r\n        firstAnchor.on('mouseover',function( e ){\r\n          openSubMenu(this, e, false); \r\n        });\r\n\r\n        /*Open sub-menu on click (fix for touch devices)*/\r\n        firstAnchor.on('touchstart',function( e ){\r\n          if( !$.isXs() ){\r\n            openSubMenu(this, e, true);\r\n          }\r\n        });\r\n\r\n        /*Sub-menu delay on mouse leave*/\r\n        firstAnchor.on('mouseleave',function(){\r\n          var _self = $(this);\r\n          var _li = _self.parent();\r\n          var subMenu = _li.find(\"> ul\");\r\n          if( !$.isXs() ){\r\n            //If mouse is over sub menu attach an additional mouseleave event to submenu\r\n            if ( subMenu.length > 0 ){\r\n              setTimeout(function(){\r\n                if( subMenu.is(':hover') ){\r\n                  subMenu.on('mouseleave',function(){\r\n                    setTimeout(function(){\r\n                      if( !_self.is(':hover') ){\r\n                        subMenu.removeClass('visible');\r\n                        _li.removeClass('open');\r\n                      }\r\n                    }, 300);\r\n                  });\r\n                }else{\r\n                  subMenu.removeClass('visible');\r\n                  _li.removeClass('open');\r\n                }\r\n              }, 300);\r\n            }else{\r\n              _li.removeClass('open');\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n    /*Open sub-menu on small devices*/\r\n      $(\".sidebar-elements li a\", leftSidebar).on(\"click\",function( e ){\r\n        if( $.isXs() ){\r\n          var $el = $(this), $open, $speed = config.leftSidebarSlideSpeed;\r\n          var $li = $el.parent();\r\n          var $subMenu = $el.next();\r\n\r\n          $open = $li.siblings(\".open\");\r\n\r\n          if( $open ){\r\n            $open.find('> ul:visible').slideUp({ duration: $speed, complete: function(){\r\n              $open.toggleClass('open');\r\n              $(this).removeAttr('style').removeClass('visible');\r\n            }});\r\n          }\r\n\r\n          if( $li.hasClass('open') ){\r\n            $subMenu.slideUp({ duration: $speed, complete: function(){\r\n              $li.toggleClass('open');\r\n              $(this).removeAttr('style').removeClass('visible');\r\n            }});\r\n          }else{\r\n            $subMenu.slideDown({ duration: $speed, complete: function(){\r\n              $li.toggleClass('open');\r\n              $(this).removeAttr('style').addClass('visible');\r\n            }});\r\n          }\r\n\r\n          if( $el.next().is('ul') ){\r\n            e.preventDefault();\r\n          }\r\n        }else{\r\n          //Close sub-menu on anchor click\r\n          if( !openLeftSidebarOnClick ){\r\n            var subMenu = $(\".sidebar-elements > li > ul:visible\", leftSidebar);\r\n            subMenu.addClass('hide');\r\n          }\r\n        }\r\n      });\r\n\r\n    /*Calculate sidebar tree active & open classes*/\r\n      $(\"li.active\", leftSidebar).parents(\".parent\").addClass(\"active\");\r\n\r\n    /*Nanoscroller when left sidebar is fixed*/\r\n      if( wrapper.hasClass(\"am-fixed-sidebar\") ){\r\n        var lsc = $(\".am-left-sidebar > .content\");\r\n        lsc.wrap('<div class=\"am-scroller nano\"></div>');\r\n        lsc.addClass(\"nano-content\");\r\n        lsc.parent().nanoScroller();\r\n      }\r\n\r\n    /*On window resize check for small resolution classes to remove them*/\r\n      $(window).resize(function () {\r\n        waitForFinalEvent(function(){\r\n          if( !$.isXs() ){\r\n            var scroller = $(\".am-scroller\");\r\n            $('.nano-content', scroller).css({'margin-right':0});\r\n            scroller.nanoScroller({ destroy: true });\r\n            scroller.nanoScroller();\r\n          }\r\n        }, 500, \"am_check_phone_classes\");\r\n      });\r\n  }\r\n\r\n  function rightSidebarInit(){\r\n\r\n    function oSidebar(){\r\n      body.addClass( config.openRightSidebarClass  + \" \" + config.transitionClass );\r\n      openSidebar = true;\r\n    }\r\n\r\n    function cSidebar(){\r\n      body.removeClass( config.openRightSidebarClass ).addClass( config.transitionClass );\r\n      sidebarDelay();\r\n    }\r\n\r\n    if( rightSidebar.length > 0 ){\r\n      /*Open-Sidebar when click on topbar button*/\r\n      $('.am-toggle-right-sidebar').on(\"click\", function(e){\r\n        if( openSidebar && body.hasClass( config.openRightSidebarClass ) ){\r\n          cSidebar();\r\n        }else if( !openSidebar ){\r\n          oSidebar();\r\n        }\r\n        \r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n      });\r\n\r\n      /*Close sidebar on click outside*/\r\n      $( document ).on(\"mousedown touchstart\",function( e ){\r\n        if ( !$( e.target ).closest( rightSidebar ).length && body.hasClass( config.openRightSidebarClass ) ) {\r\n          cSidebar();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  function sidebarDelay(){\r\n    openSidebar = true;\r\n    setTimeout(function(){\r\n      openSidebar = false;\r\n    }, config.openSidebarDelay );\r\n  }\r\n\r\n  function sidebarSwipe(){\r\n    /*Open sidedar on swipe*/\r\n    var cancelEvent = false;\r\n\r\n    wrapper.swipe( {\r\n      allowPageScroll: \"vertical\",\r\n      preventDefaultEvents: false,\r\n      fallbackToMouseEvents: false,\r\n      swipeRight: function(e) {\r\n        if( !openSidebar && !wrapper.hasClass( config.removeLeftSidebarClass ) ){\r\n          body.addClass( config.openLeftSidebarClass + \" \" + config.transitionClass );\r\n          openSidebar = true;\r\n        }\r\n      },\r\n      swipeLeft: function(e){\r\n        if( !openSidebar && rightSidebar.length > 0 ){\r\n          body.addClass( config.openRightSidebarClass + \" \" + config.transitionClass );\r\n          openSidebar = true;\r\n        }\r\n      },\r\n      swipeStatus: function(e, p){\r\n        switch( p ){\r\n          case 'start':\r\n            if( openSidebar ){\r\n              cancelEvent = true;\r\n            }\r\n          break;\r\n          case 'end':\r\n            if( cancelEvent ){\r\n              cancelEvent = false;\r\n              return false;\r\n            }\r\n          break;\r\n          case 'cancel':\r\n            cancelEvent = false;\r\n          break;\r\n        }\r\n      },\r\n      threshold: config.swipeTreshold\r\n    });\r\n  }\r\n\r\n  function chatWidget(){\r\n    var chat = $(\".am-right-sidebar .tab-pane.chat\");\r\n    var contactsEl = $(\".chat-contacts\", chat);\r\n    var conversationEl = $(\".chat-window\", chat);\r\n    var messagesContainer = $(\".chat-messages\", conversationEl);\r\n    var messagesList = $(\".content > ul\", messagesContainer);\r\n    var messagesScrollContent = $(\".nano-content\", messagesContainer);\r\n    var chatInputContainer = $(\".chat-input\", conversationEl);\r\n    var chatInput = $(\"input\", chatInputContainer);\r\n    var chatInputSendButton = $(\".send-msg\", chatInputContainer);\r\n\r\n    function openChatWindow(){\r\n      if( !chat.hasClass(\"chat-opened\") ){\r\n        chat.addClass(\"chat-opened\");\r\n        $(\".am-scroller\", messagesContainer).nanoScroller();\r\n      }\r\n    }\r\n\r\n    function closeChatWindow(){\r\n      if( chat.hasClass(\"chat-opened\") ){\r\n        chat.removeClass(\"chat-opened\");\r\n      }\r\n    }\r\n\r\n    /*Open Conversation Window when click on chat user*/\r\n    $(\".user a\", contactsEl).on('click',function( e ){\r\n      $(\".am-scroller\", contactsEl).nanoScroller({ stop: true });\r\n      openChatWindow();\r\n      e.preventDefault();\r\n    });\r\n\r\n    /*Close chat conv window*/\r\n    $(\".title .return\", conversationEl).on('click',function( e ){\r\n      closeChatWindow();\r\n      scrollerInit();\r\n    });\r\n\r\n    /*Send message*/\r\n    function sendMsg(msg, self){\r\n      var $message = $('<li class=\"' + ((self)?'self':'friend') + '\"></li>');\r\n\r\n      if( msg != '' ){\r\n        $('<div class=\"msg\">' + msg + '</div>').appendTo($message);\r\n        $message.appendTo(messagesList);\r\n\r\n        messagesScrollContent.stop().animate({\r\n          'scrollTop': messagesScrollContent.prop(\"scrollHeight\")\r\n        }, 900, 'swing');\r\n\r\n        scrollerInit();\r\n      }\r\n    }\r\n\r\n    /*Send msg when click on 'send' button or press 'Enter'*/\r\n      chatInput.keypress(function(event){\r\n        var keycode = (event.keyCode ? event.keyCode : event.which);\r\n        var msg = $(this).val();\r\n\r\n        if(keycode == '13'){\r\n          sendMsg(msg, true);\r\n          $(this).val(\"\");\r\n        }\r\n        event.stopPropagation();\r\n      });\r\n\r\n      chatInputSendButton.on('click',function(){\r\n        var msg = chatInput.val();\r\n        sendMsg(msg, true);\r\n        chatInput.val(\"\");\r\n      });\r\n  }\r\n\r\n  function scrollerInit(){\r\n    $(\".am-scroller\").nanoScroller();\r\n  }\r\n\r\n  function scrollTopButton(){\r\n    var offset = 220;\r\n    var duration = 500;\r\n    var button = $('<div class=\"am-scroll-top\"></div>');\r\n    button.appendTo(\"body\");\r\n    \r\n    $(window).on('scroll',function() {\r\n      if ( $(this).scrollTop() > offset ) {\r\n        button.fadeIn(duration);\r\n      } else {\r\n        button.fadeOut(duration);\r\n      }\r\n    });\r\n  \r\n    button.on('touchstart mouseup',function( e ) {\r\n      $( 'html, body' ).animate({ scrollTop: 0 }, duration);\r\n      e.preventDefault();\r\n    });\r\n  }\r\n\r\n  //Wait for final event on window resize\r\n  var waitForFinalEvent = (function () {\r\n    var timers = {};\r\n    return function (callback, ms, uniqueId) {\r\n      if (!uniqueId) {\r\n        uniqueId = \"x1x2x3x4\";\r\n      }\r\n      if (timers[uniqueId]) {\r\n        clearTimeout (timers[uniqueId]);\r\n      }\r\n      timers[uniqueId] = setTimeout(callback, ms);\r\n    };\r\n  })();\r\n\r\n  return {\r\n    //General data\r\n    conf: config,\r\n    color: colors,\r\n\r\n    //Init function\r\n    init: function (options) {\r\n      \r\n      // Get the main elements when document is ready\r\n      wrapper = $(\".am-wrapper\");\r\n      leftSidebar = $(\".am-left-sidebar\");\r\n      rightSidebar = $(\".am-right-sidebar\");\r\n      body = $(\"body\");\r\n\r\n      //Extends basic config with options\r\n        $.extend( config, options );\r\n\r\n      /*Left Sidebar*/\r\n        leftSidebarInit();\r\n\r\n      /*FastClick on mobile*/\r\n        FastClick.attach(document.body);\r\n      \r\n      /*Right Sidebar*/\r\n        rightSidebarInit();\r\n        chatWidget();\r\n\r\n      /*Sidebars Swipe*/\r\n        if( config.enableSwipe ){\r\n          sidebarSwipe();\r\n        }\r\n\r\n      /*Body transition effect*/\r\n        leftSidebar.on(\"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd\", function() {\r\n          body.removeClass( config.transitionClass );\r\n        });\r\n\r\n      /*Scroll Top button*/\r\n        if( config.scrollTop ){\r\n          scrollTopButton();\r\n        }\r\n\r\n      /*Get colors*/\r\n        colors.primary = getColor('clr-primary');\r\n        colors.success = getColor('clr-success');\r\n        colors.info    = getColor('clr-info');\r\n        colors.warning = getColor('clr-warning');\r\n        colors.danger  = getColor('clr-danger');\r\n        colors.alt1    = getColor('clr-alt1');\r\n        colors.alt2    = getColor('clr-alt2');\r\n        colors.alt3    = getColor('clr-alt3');\r\n        colors.alt4    = getColor('clr-alt4');\r\n\r\n      //Prevent Connections Dropdown closes on click\r\n        $(\".am-connections\").on(\"click\",function( e ){\r\n          e.stopPropagation();\r\n        });\r\n\r\n      //Nanoscroller init function\r\n        scrollerInit();\r\n\r\n      /*Bind plugins on hidden elements*/\r\n      /*Dropdown shown event*/\r\n        $('.dropdown').on('shown.bs.dropdown', function () {\r\n          $(\".am-scroller\").nanoScroller();\r\n        });\r\n        \r\n      /*Tabs refresh hidden elements*/\r\n        $('.nav-tabs').on('shown.bs.tab', function (e) {\r\n          $(\".am-scroller\").nanoScroller();\r\n        });\r\n\r\n\r\n      /*Tooltips*/\r\n        $('[data-toggle=\"tooltip\"]').tooltip();\r\n      \r\n      /*Popover*/\r\n        $('[data-toggle=\"popover\"]').popover();\r\n\r\n      /*Bootstrap modal scroll top fix*/\r\n        $('.modal').on('show.bs.modal', function(){\r\n          $(\"html\").addClass('am-modal-open');\r\n        });\r\n\r\n        $('.modal').on('hidden.bs.modal', function(){\r\n          $(\"html\").removeClass('am-modal-open');\r\n        });\r\n    },\r\n\r\n    //Methods\r\n    closeSubMenu: function(){\r\n      var subMenu = $(\".sidebar-elements > li > ul:visible\", leftSidebar);\r\n      subMenu.addClass('hide');\r\n      setTimeout(function(){\r\n        subMenu.removeClass('hide');\r\n      }, 50);\r\n    }\r\n  };\r\n \r\n})();\r\n//FastClick\r\nfunction FastClick(a,b){\"use strict\";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=[\"onMouse\",\"onClick\",\"onTouchStart\",\"onTouchMove\",\"onTouchEnd\",\"onTouchCancel\"],f=this,g=0,h=e.length;g<h;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener(\"mouseover\",this.onMouse,!0),a.addEventListener(\"mousedown\",this.onMouse,!0),a.addEventListener(\"mouseup\",this.onMouse,!0)),a.addEventListener(\"click\",this.onClick,!0),a.addEventListener(\"touchstart\",this.onTouchStart,!1),a.addEventListener(\"touchmove\",this.onTouchMove,!1),a.addEventListener(\"touchend\",this.onTouchEnd,!1),a.addEventListener(\"touchcancel\",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;\"click\"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;\"click\"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),\"function\"==typeof a.onclick&&(d=a.onclick,a.addEventListener(\"click\",function(a){d(a)},!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf(\"Android\")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\\d(_\\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\\d{2})_\\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf(\"BB10\")>0;FastClick.prototype.needsClick=function(a){\"use strict\";switch(a.nodeName.toLowerCase()){case\"button\":case\"select\":case\"textarea\":if(a.disabled)return!0;break;case\"input\":if(deviceIsIOS&&\"file\"===a.type||a.disabled)return!0;break;case\"label\":case\"video\":return!0}return/\\bneedsclick\\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){\"use strict\";switch(a.nodeName.toLowerCase()){case\"textarea\":return!0;case\"select\":return!deviceIsAndroid;case\"input\":switch(a.type){case\"button\":case\"checkbox\":case\"file\":case\"image\":case\"radio\":case\"submit\":return!1}return!a.disabled&&!a.readOnly;default:return/\\bneedsfocus\\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){\"use strict\";var c,d,e,f;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),f=b.changedTouches[0],e=document.createEvent(\"MouseEvents\"),e.initMouseEvent(\"mousedown\",!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),e.forwardedTouchEvent=!0,a.dispatchEvent(e),d=document.createEvent(\"MouseEvents\"),d.initMouseEvent(\"mouseup\",!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),d.forwardedTouchEvent=!0,a.dispatchEvent(d),c=document.createEvent(\"MouseEvents\"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,f.screenX,f.screenY,f.clientX,f.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){\"use strict\";return deviceIsAndroid&&\"select\"===a.tagName.toLowerCase()?\"mousedown\":\"click\"},FastClick.prototype.focus=function(a){\"use strict\";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf(\"date\")&&\"time\"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){\"use strict\";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){\"use strict\";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){\"use strict\";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){\"use strict\";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c},FastClick.prototype.onTouchMove=function(a){\"use strict\";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0)},FastClick.prototype.findControl=function(a){\"use strict\";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector(\"button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea\")},FastClick.prototype.onTouchEnd=function(a){\"use strict\";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),\"label\"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&\"input\"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&\"select\"===d||(this.targetElement=null,a.preventDefault()),!1);return!(!deviceIsIOS||deviceIsIOS4||(e=g.fastClickScrollParent,!e||e.fastClickLastScrollTop===e.scrollTop))||(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){\"use strict\";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){\"use strict\";return!this.targetElement||(!!a.forwardedTouchEvent||(!a.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1))))},FastClick.prototype.onClick=function(a){\"use strict\";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):\"submit\"===a.target.type&&0===a.detail||(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){\"use strict\";var a=this.layer;deviceIsAndroid&&(a.removeEventListener(\"mouseover\",this.onMouse,!0),a.removeEventListener(\"mousedown\",this.onMouse,!0),a.removeEventListener(\"mouseup\",this.onMouse,!0)),a.removeEventListener(\"click\",this.onClick,!0),a.removeEventListener(\"touchstart\",this.onTouchStart,!1),a.removeEventListener(\"touchmove\",this.onTouchMove,!1),a.removeEventListener(\"touchend\",this.onTouchEnd,!1),a.removeEventListener(\"touchcancel\",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){\"use strict\";var b,c,d;if(\"undefined\"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector(\"meta[name=viewport]\")){if(b.content.indexOf(\"user-scalable=no\")!==-1)return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(d=navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/),d[1]>=10&&d[2]>=3&&(b=document.querySelector(\"meta[name=viewport]\")))){if(b.content.indexOf(\"user-scalable=no\")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return\"none\"===a.style.msTouchAction},FastClick.attach=function(a,b){\"use strict\";return new FastClick(a,b)},\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?define(function(){\"use strict\";return FastClick}):\"undefined\"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;\r\n// TinyColor v1.2.1\r\n// https://github.com/bgrins/TinyColor\r\n// 2015-08-13, Brian Grinstead, MIT License\r\n!function(){function tinycolor(color,opts){if(color=color?color:\"\",opts=opts||{},color instanceof tinycolor)return color;if(!(this instanceof tinycolor))return new tinycolor(color,opts);var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format,this._gradientType=opts.gradientType,this._r<1&&(this._r=mathRound(this._r)),this._g<1&&(this._g=mathRound(this._g)),this._b<1&&(this._b=mathRound(this._b)),this._ok=rgb.ok,this._tc_id=tinyCounter++}function inputToRGB(color){var rgb={r:0,g:0,b:0},a=1,ok=!1,format=!1;return\"string\"==typeof color&&(color=stringInputToObject(color)),\"object\"==typeof color&&(color.hasOwnProperty(\"r\")&&color.hasOwnProperty(\"g\")&&color.hasOwnProperty(\"b\")?(rgb=rgbToRgb(color.r,color.g,color.b),ok=!0,format=\"%\"===String(color.r).substr(-1)?\"prgb\":\"rgb\"):color.hasOwnProperty(\"h\")&&color.hasOwnProperty(\"s\")&&color.hasOwnProperty(\"v\")?(color.s=convertToPercentage(color.s),color.v=convertToPercentage(color.v),rgb=hsvToRgb(color.h,color.s,color.v),ok=!0,format=\"hsv\"):color.hasOwnProperty(\"h\")&&color.hasOwnProperty(\"s\")&&color.hasOwnProperty(\"l\")&&(color.s=convertToPercentage(color.s),color.l=convertToPercentage(color.l),rgb=hslToRgb(color.h,color.s,color.l),ok=!0,format=\"hsl\"),color.hasOwnProperty(\"a\")&&(a=color.a)),a=boundAlpha(a),{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:255*bound01(r,255),g:255*bound01(g,255),b:255*bound01(b,255)}}function rgbToHsl(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){function hue2rgb(p,q,t){return 0>t&&(t+=1),t>1&&(t-=1),1/6>t?p+6*(q-p)*t:.5>t?q:2/3>t?p+6*(q-p)*(2/3-t):p}var r,g,b;if(h=bound01(h,360),s=bound01(s,100),l=bound01(l,100),0===s)r=g=b=l;else{var q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return{r:255*r,g:255*g,b:255*b}}function rgbToHsv(r,g,b){r=bound01(r,255),g=bound01(g,255),b=bound01(b,255);var h,s,max=mathMax(r,g,b),min=mathMin(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=6*bound01(h,360),s=bound01(s,100),v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:255*r,g:255*g,b:255*b}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)?hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0):hex.join(\"\")}function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join(\"\")}function desaturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s-=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function saturate(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.s+=amount/100,hsl.s=clamp01(hsl.s),tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l+=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function brighten(color,amount){amount=0===amount?0:amount||10;var rgb=tinycolor(color).toRgb();return rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100)))),rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100)))),rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100)))),tinycolor(rgb)}function darken(color,amount){amount=0===amount?0:amount||10;var hsl=tinycolor(color).toHsl();return hsl.l-=amount/100,hsl.l=clamp01(hsl.l),tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl(),hue=(mathRound(hsl.h)+amount)%360;return hsl.h=0>hue?360+hue:hue,tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();return hsl.h=(hsl.h+180)%360,tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl(),h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6,slices=slices||30;var hsl=tinycolor(color).toHsl(),part=360/slices,ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;)hsl.h=(hsl.h+part)%360,ret.push(tinycolor(hsl));return ret}function monochromatic(color,results){results=results||6;for(var hsv=tinycolor(color).toHsv(),h=hsv.h,s=hsv.s,v=hsv.v,ret=[],modification=1/results;results--;)ret.push(tinycolor({h:h,s:s,v:v})),v=(v+modification)%1;return ret}function flip(o){var flipped={};for(var i in o)o.hasOwnProperty(i)&&(flipped[o[i]]=i);return flipped}function boundAlpha(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function bound01(n,max){isOnePointZero(n)&&(n=\"100%\");var processPercent=isPercentage(n);return n=mathMin(max,mathMax(0,parseFloat(n))),processPercent&&(n=parseInt(n*max,10)/100),math.abs(n-max)<1e-6?1:n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return\"string\"==typeof n&&-1!=n.indexOf(\".\")&&1===parseFloat(n)}function isPercentage(n){return\"string\"==typeof n&&-1!=n.indexOf(\"%\")}function pad2(c){return 1==c.length?\"0\"+c:\"\"+c}function convertToPercentage(n){return 1>=n&&(n=100*n+\"%\"),n}function convertDecimalToHex(d){return Math.round(255*parseFloat(d)).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}function stringInputToObject(color){color=color.replace(trimLeft,\"\").replace(trimRight,\"\").toLowerCase();var named=!1;if(names[color])color=names[color],named=!0;else if(\"transparent\"==color)return{r:0,g:0,b:0,a:0,format:\"name\"};var match;return(match=matchers.rgb.exec(color))?{r:match[1],g:match[2],b:match[3]}:(match=matchers.rgba.exec(color))?{r:match[1],g:match[2],b:match[3],a:match[4]}:(match=matchers.hsl.exec(color))?{h:match[1],s:match[2],l:match[3]}:(match=matchers.hsla.exec(color))?{h:match[1],s:match[2],l:match[3],a:match[4]}:(match=matchers.hsv.exec(color))?{h:match[1],s:match[2],v:match[3]}:(match=matchers.hsva.exec(color))?{h:match[1],s:match[2],v:match[3],a:match[4]}:(match=matchers.hex8.exec(color))?{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?\"name\":\"hex8\"}:(match=matchers.hex6.exec(color))?{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?\"name\":\"hex\"}:(match=matchers.hex3.exec(color))?{r:parseIntFromHex(match[1]+\"\"+match[1]),g:parseIntFromHex(match[2]+\"\"+match[2]),b:parseIntFromHex(match[3]+\"\"+match[3]),format:named?\"name\":\"hex\"}:!1}function validateWCAG2Parms(parms){var level,size;return parms=parms||{level:\"AA\",size:\"small\"},level=(parms.level||\"AA\").toUpperCase(),size=(parms.size||\"small\").toLowerCase(),\"AA\"!==level&&\"AAA\"!==level&&(level=\"AA\"),\"small\"!==size&&\"large\"!==size&&(size=\"small\"),{level:level,size:size}}var trimLeft=/^[\\s,#]+/,trimRight=/\\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3},getLuminance:function(){var RsRGB,GsRGB,BsRGB,R,G,B,rgb=this.toRgb();return RsRGB=rgb.r/255,GsRGB=rgb.g/255,BsRGB=rgb.b/255,R=.03928>=RsRGB?RsRGB/12.92:Math.pow((RsRGB+.055)/1.055,2.4),G=.03928>=GsRGB?GsRGB/12.92:Math.pow((GsRGB+.055)/1.055,2.4),B=.03928>=BsRGB?BsRGB/12.92:Math.pow((BsRGB+.055)/1.055,2.4),.2126*R+.7152*G+.0722*B},setAlpha:function(value){return this._a=boundAlpha(value),this._roundA=mathRound(100*this._a)/100,this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:360*hsv.h,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b),h=mathRound(360*hsv.h),s=mathRound(100*hsv.s),v=mathRound(100*hsv.v);return 1==this._a?\"hsv(\"+h+\", \"+s+\"%, \"+v+\"%)\":\"hsva(\"+h+\", \"+s+\"%, \"+v+\"%, \"+this._roundA+\")\"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:360*hsl.h,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b),h=mathRound(360*hsl.h),s=mathRound(100*hsl.s),l=mathRound(100*hsl.l);return 1==this._a?\"hsl(\"+h+\", \"+s+\"%, \"+l+\"%)\":\"hsla(\"+h+\", \"+s+\"%, \"+l+\"%, \"+this._roundA+\")\"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return\"#\"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return\"#\"+this.toHex8()},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return 1==this._a?\"rgb(\"+mathRound(this._r)+\", \"+mathRound(this._g)+\", \"+mathRound(this._b)+\")\":\"rgba(\"+mathRound(this._r)+\", \"+mathRound(this._g)+\", \"+mathRound(this._b)+\", \"+this._roundA+\")\"},toPercentageRgb:function(){return{r:mathRound(100*bound01(this._r,255))+\"%\",g:mathRound(100*bound01(this._g,255))+\"%\",b:mathRound(100*bound01(this._b,255))+\"%\",a:this._a}},toPercentageRgbString:function(){return 1==this._a?\"rgb(\"+mathRound(100*bound01(this._r,255))+\"%, \"+mathRound(100*bound01(this._g,255))+\"%, \"+mathRound(100*bound01(this._b,255))+\"%)\":\"rgba(\"+mathRound(100*bound01(this._r,255))+\"%, \"+mathRound(100*bound01(this._g,255))+\"%, \"+mathRound(100*bound01(this._b,255))+\"%, \"+this._roundA+\")\"},toName:function(){return 0===this._a?\"transparent\":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function(secondColor){var hex8String=\"#\"+rgbaToHex(this._r,this._g,this._b,this._a),secondHex8String=hex8String,gradientType=this._gradientType?\"GradientType = 1, \":\"\";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String()}return\"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=!1,hasAlpha=this._a<1&&this._a>=0,needsAlphaFormat=!formatSet&&hasAlpha&&(\"hex\"===format||\"hex6\"===format||\"hex3\"===format||\"name\"===format);return needsAlphaFormat?\"name\"===format&&0===this._a?this.toName():this.toRgbString():(\"rgb\"===format&&(formattedString=this.toRgbString()),\"prgb\"===format&&(formattedString=this.toPercentageRgbString()),(\"hex\"===format||\"hex6\"===format)&&(formattedString=this.toHexString()),\"hex3\"===format&&(formattedString=this.toHexString(!0)),\"hex8\"===format&&(formattedString=this.toHex8String()),\"name\"===format&&(formattedString=this.toName()),\"hsl\"===format&&(formattedString=this.toHslString()),\"hsv\"===format&&(formattedString=this.toHsvString()),formattedString||this.toHexString())},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));return this._r=color._r,this._g=color._g,this._b=color._b,this.setAlpha(color._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(color,opts){if(\"object\"==typeof color){var newColor={};for(var i in color)color.hasOwnProperty(i)&&(newColor[i]=\"a\"===i?color[i]:convertToPercentage(color[i]));color=newColor}return tinycolor(color,opts)},tinycolor.equals=function(color1,color2){return color1&&color2?tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString():!1},tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})},tinycolor.mix=function(color1,color2,amount){amount=0===amount?0:amount||50;var w1,rgb1=tinycolor(color1).toRgb(),rgb2=tinycolor(color2).toRgb(),p=amount/100,w=2*p-1,a=rgb2.a-rgb1.a;w1=-1==w*a?w:(w+a)/(1+w*a),w1=(w1+1)/2;var w2=1-w1,rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba)},tinycolor.readability=function(color1,color2){var c1=tinycolor(color1),c2=tinycolor(color2);return(Math.max(c1.getLuminance(),c2.getLuminance())+.05)/(Math.min(c1.getLuminance(),c2.getLuminance())+.05)},tinycolor.isReadable=function(color1,color2,wcag2){var wcag2Parms,out,readability=tinycolor.readability(color1,color2);switch(out=!1,wcag2Parms=validateWCAG2Parms(wcag2),wcag2Parms.level+wcag2Parms.size){case\"AAsmall\":case\"AAAlarge\":out=readability>=4.5;break;case\"AAlarge\":out=readability>=3;break;case\"AAAsmall\":out=readability>=7}return out},tinycolor.mostReadable=function(baseColor,colorList,args){var readability,includeFallbackColors,level,size,bestColor=null,bestScore=0;args=args||{},includeFallbackColors=args.includeFallbackColors,level=args.level,size=args.size;for(var i=0;i<colorList.length;i++)readability=tinycolor.readability(baseColor,colorList[i]),readability>bestScore&&(bestScore=readability,bestColor=tinycolor(colorList[i]));return tinycolor.isReadable(baseColor,bestColor,{level:level,size:size})||!includeFallbackColors?bestColor:(args.includeFallbackColors=!1,tinycolor.mostReadable(baseColor,[\"#fff\",\"#000\"],args))};var names=tinycolor.names={aliceblue:\"f0f8ff\",antiquewhite:\"faebd7\",aqua:\"0ff\",aquamarine:\"7fffd4\",azure:\"f0ffff\",beige:\"f5f5dc\",bisque:\"ffe4c4\",black:\"000\",blanchedalmond:\"ffebcd\",blue:\"00f\",blueviolet:\"8a2be2\",brown:\"a52a2a\",burlywood:\"deb887\",burntsienna:\"ea7e5d\",cadetblue:\"5f9ea0\",chartreuse:\"7fff00\",chocolate:\"d2691e\",coral:\"ff7f50\",cornflowerblue:\"6495ed\",cornsilk:\"fff8dc\",crimson:\"dc143c\",cyan:\"0ff\",darkblue:\"00008b\",darkcyan:\"008b8b\",darkgoldenrod:\"b8860b\",darkgray:\"a9a9a9\",darkgreen:\"006400\",darkgrey:\"a9a9a9\",darkkhaki:\"bdb76b\",darkmagenta:\"8b008b\",darkolivegreen:\"556b2f\",darkorange:\"ff8c00\",darkorchid:\"9932cc\",darkred:\"8b0000\",darksalmon:\"e9967a\",darkseagreen:\"8fbc8f\",darkslateblue:\"483d8b\",darkslategray:\"2f4f4f\",darkslategrey:\"2f4f4f\",darkturquoise:\"00ced1\",darkviolet:\"9400d3\",deeppink:\"ff1493\",deepskyblue:\"00bfff\",dimgray:\"696969\",dimgrey:\"696969\",dodgerblue:\"1e90ff\",firebrick:\"b22222\",floralwhite:\"fffaf0\",forestgreen:\"228b22\",fuchsia:\"f0f\",gainsboro:\"dcdcdc\",ghostwhite:\"f8f8ff\",gold:\"ffd700\",goldenrod:\"daa520\",gray:\"808080\",green:\"008000\",greenyellow:\"adff2f\",grey:\"808080\",honeydew:\"f0fff0\",hotpink:\"ff69b4\",indianred:\"cd5c5c\",indigo:\"4b0082\",ivory:\"fffff0\",khaki:\"f0e68c\",lavender:\"e6e6fa\",lavenderblush:\"fff0f5\",lawngreen:\"7cfc00\",lemonchiffon:\"fffacd\",lightblue:\"add8e6\",lightcoral:\"f08080\",lightcyan:\"e0ffff\",lightgoldenrodyellow:\"fafad2\",lightgray:\"d3d3d3\",lightgreen:\"90ee90\",lightgrey:\"d3d3d3\",lightpink:\"ffb6c1\",lightsalmon:\"ffa07a\",lightseagreen:\"20b2aa\",lightskyblue:\"87cefa\",lightslategray:\"789\",lightslategrey:\"789\",lightsteelblue:\"b0c4de\",lightyellow:\"ffffe0\",lime:\"0f0\",limegreen:\"32cd32\",linen:\"faf0e6\",magenta:\"f0f\",maroon:\"800000\",mediumaquamarine:\"66cdaa\",mediumblue:\"0000cd\",mediumorchid:\"ba55d3\",mediumpurple:\"9370db\",mediumseagreen:\"3cb371\",mediumslateblue:\"7b68ee\",mediumspringgreen:\"00fa9a\",mediumturquoise:\"48d1cc\",mediumvioletred:\"c71585\",midnightblue:\"191970\",mintcream:\"f5fffa\",mistyrose:\"ffe4e1\",moccasin:\"ffe4b5\",navajowhite:\"ffdead\",navy:\"000080\",oldlace:\"fdf5e6\",olive:\"808000\",olivedrab:\"6b8e23\",orange:\"ffa500\",orangered:\"ff4500\",orchid:\"da70d6\",palegoldenrod:\"eee8aa\",palegreen:\"98fb98\",paleturquoise:\"afeeee\",palevioletred:\"db7093\",papayawhip:\"ffefd5\",peachpuff:\"ffdab9\",peru:\"cd853f\",pink:\"ffc0cb\",plum:\"dda0dd\",powderblue:\"b0e0e6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"f00\",rosybrown:\"bc8f8f\",royalblue:\"4169e1\",saddlebrown:\"8b4513\",salmon:\"fa8072\",sandybrown:\"f4a460\",seagreen:\"2e8b57\",seashell:\"fff5ee\",sienna:\"a0522d\",silver:\"c0c0c0\",skyblue:\"87ceeb\",slateblue:\"6a5acd\",slategray:\"708090\",slategrey:\"708090\",snow:\"fffafa\",springgreen:\"00ff7f\",steelblue:\"4682b4\",tan:\"d2b48c\",teal:\"008080\",thistle:\"d8bfd8\",tomato:\"ff6347\",turquoise:\"40e0d0\",violet:\"ee82ee\",wheat:\"f5deb3\",white:\"fff\",whitesmoke:\"f5f5f5\",yellow:\"ff0\",yellowgreen:\"9acd32\"},hexNames=tinycolor.hexNames=flip(names),matchers=function(){var CSS_INTEGER=\"[-\\\\+]?\\\\d+%?\",CSS_NUMBER=\"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\",CSS_UNIT=\"(?:\"+CSS_NUMBER+\")|(?:\"+CSS_INTEGER+\")\",PERMISSIVE_MATCH3=\"[\\\\s|\\\\(]+(\"+CSS_UNIT+\")[,|\\\\s]+(\"+CSS_UNIT+\")[,|\\\\s]+(\"+CSS_UNIT+\")\\\\s*\\\\)?\",PERMISSIVE_MATCH4=\"[\\\\s|\\\\(]+(\"+CSS_UNIT+\")[,|\\\\s]+(\"+CSS_UNIT+\")[,|\\\\s]+(\"+CSS_UNIT+\")[,|\\\\s]+(\"+CSS_UNIT+\")\\\\s*\\\\)?\";return{rgb:new RegExp(\"rgb\"+PERMISSIVE_MATCH3),rgba:new RegExp(\"rgba\"+PERMISSIVE_MATCH4),hsl:new RegExp(\"hsl\"+PERMISSIVE_MATCH3),hsla:new RegExp(\"hsla\"+PERMISSIVE_MATCH4),hsv:new RegExp(\"hsv\"+PERMISSIVE_MATCH3),hsva:new RegExp(\"hsva\"+PERMISSIVE_MATCH4),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();\"undefined\"!=typeof module&&module.exports?module.exports=tinycolor:\"function\"==typeof define&&define.amd?define(function(){return tinycolor}):window.tinycolor=tinycolor}();\r\n/*!\r\n * @fileOverview TouchSwipe - jQuery Plugin\r\n * @version 1.6.18\r\n *\r\n * @author Matt Bryson http://www.github.com/mattbryson\r\n * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin\r\n * @see http://labs.rampinteractive.co.uk/touchSwipe/\r\n * @see http://plugins.jquery.com/project/touchSwipe\r\n * @license\r\n * Copyright (c) 2010-2015 Matt Bryson\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n */\r\n!function(factory){\"function\"==typeof define&&define.amd&&define.amd.jQuery?define([\"jquery\"],factory):factory(\"undefined\"!=typeof module&&module.exports?require(\"jquery\"):jQuery)}(function($){\"use strict\";function init(options){return!options||void 0!==options.allowPageScroll||void 0===options.swipe&&void 0===options.swipeStatus||(options.allowPageScroll=NONE),void 0!==options.click&&void 0===options.tap&&(options.tap=options.click),options||(options={}),options=$.extend({},$.fn.swipe.defaults,options),this.each(function(){var $this=$(this),plugin=$this.data(PLUGIN_NS);plugin||(plugin=new TouchSwipe(this,options),$this.data(PLUGIN_NS,plugin))})}function TouchSwipe(element,options){function touchStart(jqEvent){if(!(getTouchInProgress()||$(jqEvent.target).closest(options.excludedElements,$element).length>0)){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(!event.pointerType||\"mouse\"!=event.pointerType||0!=options.fallbackToMouseEvents){var ret,touches=event.touches,evt=touches?touches[0]:event;return phase=PHASE_START,touches?fingerCount=touches.length:options.preventDefaultEvents!==!1&&jqEvent.preventDefault(),distance=0,direction=null,currentDirection=null,pinchDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,maximumsMap=createMaximumsData(),cancelMultiFingerRelease(),createFingerData(0,evt),!touches||fingerCount===options.fingers||options.fingers===ALL_FINGERS||hasPinches()?(startTime=getTimeStamp(),2==fingerCount&&(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)),(options.swipeStatus||options.pinchStatus)&&(ret=triggerHandler(event,phase))):ret=!1,ret===!1?(phase=PHASE_CANCEL,triggerHandler(event,phase),ret):(options.hold&&(holdTimeout=setTimeout($.proxy(function(){$element.trigger(\"hold\",[event.target]),options.hold&&(ret=options.hold.call($element,event,event.target))},this),options.longTapThreshold)),setTouchInProgress(!0),null)}}}function touchMove(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;if(phase!==PHASE_END&&phase!==PHASE_CANCEL&&!inMultiFingerRelease()){var ret,touches=event.touches,evt=touches?touches[0]:event,currentFinger=updateFingerData(evt);if(endTime=getTimeStamp(),touches&&(fingerCount=touches.length),options.hold&&clearTimeout(holdTimeout),phase=PHASE_MOVE,2==fingerCount&&(0==startTouchesDistance?(createFingerData(1,touches[1]),startTouchesDistance=endTouchesDistance=calculateTouchesDistance(fingerData[0].start,fingerData[1].start)):(updateFingerData(touches[1]),endTouchesDistance=calculateTouchesDistance(fingerData[0].end,fingerData[1].end),pinchDirection=calculatePinchDirection(fingerData[0].end,fingerData[1].end)),pinchZoom=calculatePinchZoom(startTouchesDistance,endTouchesDistance),pinchDistance=Math.abs(startTouchesDistance-endTouchesDistance)),fingerCount===options.fingers||options.fingers===ALL_FINGERS||!touches||hasPinches()){if(direction=calculateDirection(currentFinger.start,currentFinger.end),currentDirection=calculateDirection(currentFinger.last,currentFinger.end),validateDefaultEvent(jqEvent,currentDirection),distance=calculateDistance(currentFinger.start,currentFinger.end),duration=calculateDuration(),setMaxDistance(direction,distance),ret=triggerHandler(event,phase),!options.triggerOnTouchEnd||options.triggerOnTouchLeave){var inBounds=!0;if(options.triggerOnTouchLeave){var bounds=getbounds(this);inBounds=isInBounds(currentFinger.end,bounds)}!options.triggerOnTouchEnd&&inBounds?phase=getNextPhase(PHASE_MOVE):options.triggerOnTouchLeave&&!inBounds&&(phase=getNextPhase(PHASE_END)),phase!=PHASE_CANCEL&&phase!=PHASE_END||triggerHandler(event,phase)}}else phase=PHASE_CANCEL,triggerHandler(event,phase);ret===!1&&(phase=PHASE_CANCEL,triggerHandler(event,phase))}}function touchEnd(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent,touches=event.touches;if(touches){if(touches.length&&!inMultiFingerRelease())return startMultiFingerRelease(event),!0;if(touches.length&&inMultiFingerRelease())return!0}return inMultiFingerRelease()&&(fingerCount=fingerCountAtRelease),endTime=getTimeStamp(),duration=calculateDuration(),didSwipeBackToCancel()||!validateSwipeDistance()?(phase=PHASE_CANCEL,triggerHandler(event,phase)):options.triggerOnTouchEnd||options.triggerOnTouchEnd===!1&&phase===PHASE_MOVE?(options.preventDefaultEvents!==!1&&jqEvent.preventDefault(),phase=PHASE_END,triggerHandler(event,phase)):!options.triggerOnTouchEnd&&hasTap()?(phase=PHASE_END,triggerHandlerForGesture(event,phase,TAP)):phase===PHASE_MOVE&&(phase=PHASE_CANCEL,triggerHandler(event,phase)),setTouchInProgress(!1),null}function touchCancel(){fingerCount=0,endTime=0,startTime=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,cancelMultiFingerRelease(),setTouchInProgress(!1)}function touchLeave(jqEvent){var event=jqEvent.originalEvent?jqEvent.originalEvent:jqEvent;options.triggerOnTouchLeave&&(phase=getNextPhase(PHASE_END),triggerHandler(event,phase))}function removeListeners(){$element.unbind(START_EV,touchStart),$element.unbind(CANCEL_EV,touchCancel),$element.unbind(MOVE_EV,touchMove),$element.unbind(END_EV,touchEnd),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave),setTouchInProgress(!1)}function getNextPhase(currentPhase){var nextPhase=currentPhase,validTime=validateSwipeTime(),validDistance=validateSwipeDistance(),didCancel=didSwipeBackToCancel();return!validTime||didCancel?nextPhase=PHASE_CANCEL:!validDistance||currentPhase!=PHASE_MOVE||options.triggerOnTouchEnd&&!options.triggerOnTouchLeave?!validDistance&&currentPhase==PHASE_END&&options.triggerOnTouchLeave&&(nextPhase=PHASE_CANCEL):nextPhase=PHASE_END,nextPhase}function triggerHandler(event,phase){var ret,touches=event.touches;return(didSwipe()||hasSwipes())&&(ret=triggerHandlerForGesture(event,phase,SWIPE)),(didPinch()||hasPinches())&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,PINCH)),didDoubleTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,DOUBLE_TAP):didLongTap()&&ret!==!1?ret=triggerHandlerForGesture(event,phase,LONG_TAP):didTap()&&ret!==!1&&(ret=triggerHandlerForGesture(event,phase,TAP)),phase===PHASE_CANCEL&&touchCancel(event),phase===PHASE_END&&(touches?touches.length||touchCancel(event):touchCancel(event)),ret}function triggerHandlerForGesture(event,phase,gesture){var ret;if(gesture==SWIPE){if($element.trigger(\"swipeStatus\",[phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection]),options.swipeStatus&&(ret=options.swipeStatus.call($element,event,phase,direction||null,distance||0,duration||0,fingerCount,fingerData,currentDirection),ret===!1))return!1;if(phase==PHASE_END&&validateSwipe()){if(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),$element.trigger(\"swipe\",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipe&&(ret=options.swipe.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection),ret===!1))return!1;switch(direction){case LEFT:$element.trigger(\"swipeLeft\",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeLeft&&(ret=options.swipeLeft.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case RIGHT:$element.trigger(\"swipeRight\",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeRight&&(ret=options.swipeRight.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case UP:$element.trigger(\"swipeUp\",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeUp&&(ret=options.swipeUp.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection));break;case DOWN:$element.trigger(\"swipeDown\",[direction,distance,duration,fingerCount,fingerData,currentDirection]),options.swipeDown&&(ret=options.swipeDown.call($element,event,direction,distance,duration,fingerCount,fingerData,currentDirection))}}}if(gesture==PINCH){if($element.trigger(\"pinchStatus\",[phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchStatus&&(ret=options.pinchStatus.call($element,event,phase,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData),ret===!1))return!1;if(phase==PHASE_END&&validatePinch())switch(pinchDirection){case IN:$element.trigger(\"pinchIn\",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchIn&&(ret=options.pinchIn.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData));break;case OUT:$element.trigger(\"pinchOut\",[pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData]),options.pinchOut&&(ret=options.pinchOut.call($element,event,pinchDirection||null,pinchDistance||0,duration||0,fingerCount,pinchZoom,fingerData))}}return gesture==TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),hasDoubleTap()&&!inDoubleTap()?(doubleTapStartTime=getTimeStamp(),singleTapTimeout=setTimeout($.proxy(function(){doubleTapStartTime=null,$element.trigger(\"tap\",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target))},this),options.doubleTapThreshold)):(doubleTapStartTime=null,$element.trigger(\"tap\",[event.target]),options.tap&&(ret=options.tap.call($element,event,event.target)))):gesture==DOUBLE_TAP?phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),clearTimeout(holdTimeout),doubleTapStartTime=null,$element.trigger(\"doubletap\",[event.target]),options.doubleTap&&(ret=options.doubleTap.call($element,event,event.target))):gesture==LONG_TAP&&(phase!==PHASE_CANCEL&&phase!==PHASE_END||(clearTimeout(singleTapTimeout),doubleTapStartTime=null,$element.trigger(\"longtap\",[event.target]),options.longTap&&(ret=options.longTap.call($element,event,event.target)))),ret}function validateSwipeDistance(){var valid=!0;return null!==options.threshold&&(valid=distance>=options.threshold),valid}function didSwipeBackToCancel(){var cancelled=!1;return null!==options.cancelThreshold&&null!==direction&&(cancelled=getMaxDistance(direction)-distance>=options.cancelThreshold),cancelled}function validatePinchDistance(){return null!==options.pinchThreshold?pinchDistance>=options.pinchThreshold:!0}function validateSwipeTime(){var result;return result=options.maxTimeThreshold?!(duration>=options.maxTimeThreshold):!0}function validateDefaultEvent(jqEvent,direction){if(options.preventDefaultEvents!==!1)if(options.allowPageScroll===NONE)jqEvent.preventDefault();else{var auto=options.allowPageScroll===AUTO;switch(direction){case LEFT:(options.swipeLeft&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case RIGHT:(options.swipeRight&&auto||!auto&&options.allowPageScroll!=HORIZONTAL)&&jqEvent.preventDefault();break;case UP:(options.swipeUp&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case DOWN:(options.swipeDown&&auto||!auto&&options.allowPageScroll!=VERTICAL)&&jqEvent.preventDefault();break;case NONE:}}}function validatePinch(){var hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),hasCorrectDistance=validatePinchDistance();return hasCorrectFingerCount&&hasEndPoint&&hasCorrectDistance}function hasPinches(){return!!(options.pinchStatus||options.pinchIn||options.pinchOut)}function didPinch(){return!(!validatePinch()||!hasPinches())}function validateSwipe(){var hasValidTime=validateSwipeTime(),hasValidDistance=validateSwipeDistance(),hasCorrectFingerCount=validateFingers(),hasEndPoint=validateEndPoint(),didCancel=didSwipeBackToCancel(),valid=!didCancel&&hasEndPoint&&hasCorrectFingerCount&&hasValidDistance&&hasValidTime;return valid}function hasSwipes(){return!!(options.swipe||options.swipeStatus||options.swipeLeft||options.swipeRight||options.swipeUp||options.swipeDown)}function didSwipe(){return!(!validateSwipe()||!hasSwipes())}function validateFingers(){return fingerCount===options.fingers||options.fingers===ALL_FINGERS||!SUPPORTS_TOUCH}function validateEndPoint(){return 0!==fingerData[0].end.x}function hasTap(){return!!options.tap}function hasDoubleTap(){return!!options.doubleTap}function hasLongTap(){return!!options.longTap}function validateDoubleTap(){if(null==doubleTapStartTime)return!1;var now=getTimeStamp();return hasDoubleTap()&&now-doubleTapStartTime<=options.doubleTapThreshold}function inDoubleTap(){return validateDoubleTap()}function validateTap(){return(1===fingerCount||!SUPPORTS_TOUCH)&&(isNaN(distance)||distance<options.threshold)}function validateLongTap(){return duration>options.longTapThreshold&&DOUBLE_TAP_THRESHOLD>distance}function didTap(){return!(!validateTap()||!hasTap())}function didDoubleTap(){return!(!validateDoubleTap()||!hasDoubleTap())}function didLongTap(){return!(!validateLongTap()||!hasLongTap())}function startMultiFingerRelease(event){previousTouchEndTime=getTimeStamp(),fingerCountAtRelease=event.touches.length+1}function cancelMultiFingerRelease(){previousTouchEndTime=0,fingerCountAtRelease=0}function inMultiFingerRelease(){var withinThreshold=!1;if(previousTouchEndTime){var diff=getTimeStamp()-previousTouchEndTime;diff<=options.fingerReleaseThreshold&&(withinThreshold=!0)}return withinThreshold}function getTouchInProgress(){return!($element.data(PLUGIN_NS+\"_intouch\")!==!0)}function setTouchInProgress(val){$element&&(val===!0?($element.bind(MOVE_EV,touchMove),$element.bind(END_EV,touchEnd),LEAVE_EV&&$element.bind(LEAVE_EV,touchLeave)):($element.unbind(MOVE_EV,touchMove,!1),$element.unbind(END_EV,touchEnd,!1),LEAVE_EV&&$element.unbind(LEAVE_EV,touchLeave,!1)),$element.data(PLUGIN_NS+\"_intouch\",val===!0))}function createFingerData(id,evt){var f={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return f.start.x=f.last.x=f.end.x=evt.pageX||evt.clientX,f.start.y=f.last.y=f.end.y=evt.pageY||evt.clientY,fingerData[id]=f,f}function updateFingerData(evt){var id=void 0!==evt.identifier?evt.identifier:0,f=getFingerData(id);return null===f&&(f=createFingerData(id,evt)),f.last.x=f.end.x,f.last.y=f.end.y,f.end.x=evt.pageX||evt.clientX,f.end.y=evt.pageY||evt.clientY,f}function getFingerData(id){return fingerData[id]||null}function setMaxDistance(direction,distance){direction!=NONE&&(distance=Math.max(distance,getMaxDistance(direction)),maximumsMap[direction].distance=distance)}function getMaxDistance(direction){return maximumsMap[direction]?maximumsMap[direction].distance:void 0}function createMaximumsData(){var maxData={};return maxData[LEFT]=createMaximumVO(LEFT),maxData[RIGHT]=createMaximumVO(RIGHT),maxData[UP]=createMaximumVO(UP),maxData[DOWN]=createMaximumVO(DOWN),maxData}function createMaximumVO(dir){return{direction:dir,distance:0}}function calculateDuration(){return endTime-startTime}function calculateTouchesDistance(startPoint,endPoint){var diffX=Math.abs(startPoint.x-endPoint.x),diffY=Math.abs(startPoint.y-endPoint.y);return Math.round(Math.sqrt(diffX*diffX+diffY*diffY))}function calculatePinchZoom(startDistance,endDistance){var percent=endDistance/startDistance*1;return percent.toFixed(2)}function calculatePinchDirection(){return 1>pinchZoom?OUT:IN}function calculateDistance(startPoint,endPoint){return Math.round(Math.sqrt(Math.pow(endPoint.x-startPoint.x,2)+Math.pow(endPoint.y-startPoint.y,2)))}function calculateAngle(startPoint,endPoint){var x=startPoint.x-endPoint.x,y=endPoint.y-startPoint.y,r=Math.atan2(y,x),angle=Math.round(180*r/Math.PI);return 0>angle&&(angle=360-Math.abs(angle)),angle}function calculateDirection(startPoint,endPoint){if(comparePoints(startPoint,endPoint))return NONE;var angle=calculateAngle(startPoint,endPoint);return 45>=angle&&angle>=0?LEFT:360>=angle&&angle>=315?LEFT:angle>=135&&225>=angle?RIGHT:angle>45&&135>angle?DOWN:UP}function getTimeStamp(){var now=new Date;return now.getTime()}function getbounds(el){el=$(el);var offset=el.offset(),bounds={left:offset.left,right:offset.left+el.outerWidth(),top:offset.top,bottom:offset.top+el.outerHeight()};return bounds}function isInBounds(point,bounds){return point.x>bounds.left&&point.x<bounds.right&&point.y>bounds.top&&point.y<bounds.bottom}function comparePoints(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y}var options=$.extend({},options),useTouchEvents=SUPPORTS_TOUCH||SUPPORTS_POINTER||!options.fallbackToMouseEvents,START_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?\"MSPointerDown\":\"pointerdown\":\"touchstart\":\"mousedown\",MOVE_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?\"MSPointerMove\":\"pointermove\":\"touchmove\":\"mousemove\",END_EV=useTouchEvents?SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?\"MSPointerUp\":\"pointerup\":\"touchend\":\"mouseup\",LEAVE_EV=useTouchEvents?SUPPORTS_POINTER?\"mouseleave\":null:\"mouseleave\",CANCEL_EV=SUPPORTS_POINTER?SUPPORTS_POINTER_IE10?\"MSPointerCancel\":\"pointercancel\":\"touchcancel\",distance=0,direction=null,currentDirection=null,duration=0,startTouchesDistance=0,endTouchesDistance=0,pinchZoom=1,pinchDistance=0,pinchDirection=0,maximumsMap=null,$element=$(element),phase=\"start\",fingerCount=0,fingerData={},startTime=0,endTime=0,previousTouchEndTime=0,fingerCountAtRelease=0,doubleTapStartTime=0,singleTapTimeout=null,holdTimeout=null;try{$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel)}catch(e){$.error(\"events not supported \"+START_EV+\",\"+CANCEL_EV+\" on jQuery.swipe\")}this.enable=function(){return this.disable(),$element.bind(START_EV,touchStart),$element.bind(CANCEL_EV,touchCancel),$element},this.disable=function(){return removeListeners(),$element},this.destroy=function(){removeListeners(),$element.data(PLUGIN_NS,null),$element=null},this.option=function(property,value){if(\"object\"==typeof property)options=$.extend(options,property);else if(void 0!==options[property]){if(void 0===value)return options[property];options[property]=value}else{if(!property)return options;$.error(\"Option \"+property+\" does not exist on jQuery.swipe.options\")}return null}}var VERSION=\"1.6.18\",LEFT=\"left\",RIGHT=\"right\",UP=\"up\",DOWN=\"down\",IN=\"in\",OUT=\"out\",NONE=\"none\",AUTO=\"auto\",SWIPE=\"swipe\",PINCH=\"pinch\",TAP=\"tap\",DOUBLE_TAP=\"doubletap\",LONG_TAP=\"longtap\",HORIZONTAL=\"horizontal\",VERTICAL=\"vertical\",ALL_FINGERS=\"all\",DOUBLE_TAP_THRESHOLD=10,PHASE_START=\"start\",PHASE_MOVE=\"move\",PHASE_END=\"end\",PHASE_CANCEL=\"cancel\",SUPPORTS_TOUCH=\"ontouchstart\"in window,SUPPORTS_POINTER_IE10=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!SUPPORTS_TOUCH,SUPPORTS_POINTER=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!SUPPORTS_TOUCH,PLUGIN_NS=\"TouchSwipe\",defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:\"auto\",fallbackToMouseEvents:!0,excludedElements:\".noSwipe\",preventDefaultEvents:!0};$.fn.swipe=function(method){var $this=$(this),plugin=$this.data(PLUGIN_NS);if(plugin&&\"string\"==typeof method){if(plugin[method])return plugin[method].apply(plugin,Array.prototype.slice.call(arguments,1));$.error(\"Method \"+method+\" does not exist on jQuery.swipe\")}else if(plugin&&\"object\"==typeof method)plugin.option.apply(plugin,arguments);else if(!(plugin||\"object\"!=typeof method&&method))return init.apply(this,arguments);return $this},$.fn.swipe.version=VERSION,$.fn.swipe.defaults=defaults,$.fn.swipe.phases={PHASE_START:PHASE_START,PHASE_MOVE:PHASE_MOVE,PHASE_END:PHASE_END,PHASE_CANCEL:PHASE_CANCEL},$.fn.swipe.directions={LEFT:LEFT,RIGHT:RIGHT,UP:UP,DOWN:DOWN,IN:IN,OUT:OUT},$.fn.swipe.pageScroll={NONE:NONE,HORIZONTAL:HORIZONTAL,VERTICAL:VERTICAL,AUTO:AUTO},$.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:ALL_FINGERS}});\r\n/*!\r\n * jQuery bootstrap 3 breakpoint check\r\n * Check the current visibility of bootstrap 3 breakpoints\r\n *\r\n * @example `$.isXs()` function alias for `$.isBreakpoint(\"xs\")`\r\n * @example `$.isSm()` function alias for `$.isBreakpoint(\"sm\")`\r\n * @example `$.isMd()` function alias for `$.isBreakpoint(\"md\")`\r\n * @example `$.isLg()` function alias for `$.isBreakpoint(\"lg\")`\r\n * @version 1.0.0\r\n * @copyright Jens A. (cakebake) and other contributors\r\n * @license Released under the MIT license\r\n */\r\n!function(a){a.isBreakpoint=function(b){var c,d;return c=a(\"<div/>\",{\"class\":\"visible-\"+b}).appendTo(\"body\"),d=c.is(\":visible\"),c.remove(),d},a.extend(a,{isXs:function(){return a.isBreakpoint(\"xs\")},isSm:function(){return a.isBreakpoint(\"sm\")},isMd:function(){return a.isBreakpoint(\"md\")},isLg:function(){return a.isBreakpoint(\"lg\")}})}(jQuery);","/**\r\n  Data que l'on veut récupérer\r\n*/\r\nvar dataOfClient = ['l1_normalisee','l2_normalisee', 'l3_normalisee', 'l4_normalisee', 'l6_normalisee', 'l7_normalisee','libreg_new', 'coordonnees', 'siren', 'nic', 'ape700', 'libapet'];\r\nvar timeout = null;\r\n/**\r\n  Fonction saveCustomerCompanyData(e)\r\n  Rôle : fonction de sauvegarde ou d'update de la 1ere partie du formulaire clients\r\n*/\r\nfunction saveCustomerCompanyData(e) {\r\n  e.preventDefault();\r\n  var formElement = document.getElementById(\"customercreatestep1\");\r\n  // console.log(formElement.action);\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  // On crée un objet de la class FormData - bit.ly/js-formdataclass\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token); // Adding extra parameters to form_data\r\n\r\n  // if(formElement.getAttribute(\"data-customerid\")) {\r\n  if(document.querySelector('meta[name=\"customercode\"]')!= null || formElement.getAttribute(\"data-customerid\")!= null) { \r\n      formData.append(\"customer_id\", formElement.dataset.customerid);\r\n      formData.append(\"customercode\", $('meta[name=customercode]').attr('content'));  \r\n  }\r\n\r\n  // On sauvegarde les données avec la function utilities.js/saveWithAjax()\r\n  saveWithAjax(formElement, formData);\r\n\r\n  // console.log(formData);\r\n  e.stopPropagation();\r\n} // Fin fonction de sauvegarde du 1er formulaire entreprise\r\n\r\nfunction saveCustomerPersoData(e) {\r\n  e.preventDefault();\r\n  var formElement = document.getElementById(\"customercreatestep2\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  // if(formElement.getAttribute(\"data-customerid\")) {\r\n  if(document.querySelector('meta[name=\"customercode\"]')!= null || formElement.getAttribute(\"data-customerid\")!= null) { \r\n      formData.append(\"customer_id\", formElement.dataset.customerid);\r\n      formData.append(\"customercode\", $('meta[name=customercode]').attr('content'));  \r\n  }\r\n  // console.log(formData);\r\n\r\n  // On sauvegarde les données\r\n  saveWithAjax(formElement, formData);\r\n  e.stopPropagation();\r\n}\r\n\r\nfunction saveCustomerContactData(e) {\r\n  e.preventDefault();\r\n  var formElement = document.getElementById(\"customercreatestep3\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  // if(formElement.getAttribute(\"data-customerid\")) {\r\n  if(document.querySelector('meta[name=\"customercode\"]')!= null || formElement.getAttribute(\"data-customerid\")!= null) { \r\n      formData.append(\"customer_id\", formElement.dataset.customerid);\r\n      formData.append(\"customercode\", $('meta[name=customercode]').attr('content'));  \r\n  }\r\n  // console.log(formData);\r\n\r\n  // On sauvegarde les données\r\n  saveWithAjax(formElement, formData);\r\n  e.stopPropagation();\r\n}\r\n\r\n\r\n\r\n$.ajaxSetup({\r\n    headers: {\r\n        //'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content');\r\n    }\r\n});\r\n\r\nfunction searchcompanydata() {\r\n  //$('.searchcustomerresults').fadeOut();\r\n  var thisinput = $(this);\r\n\r\n  //alert(searchcompany_input.value);\r\n  //alert(searchcompany_city_input.value);\r\n  var req = searchcompany_input.value+'+'+searchcompany_city_input.value;\r\n  var urlreq = \"https://numericfactory.my.opendatasoft.com/api/records/1.0/search/?dataset=sirene%40public&q=\"+req+\"&apikey=b0d7384b36f2cca44d7ea0bdf768a822dde5577e92043628bf5abe4e\";\r\n  \r\n  if(searchcompany_input.value.trim() == '' || searchcompany_input.value.length < 3 ) {\r\n     searchcustomerresultslist.innerHTML='';\r\n     $('.searchcustomerresults p').empty();\r\n      $('.searchcustomerresults').slideUp();\r\n  }\r\n  else {\r\n\r\n  clearTimeout(timeout);\r\n  timeout = setTimeout(function(){\r\n  thisinput.next().removeClass('hidden'); // on affiche le loader dans l'input\r\n  $.ajax({\r\n    //headers: {\"X-CSRF-TOKEN\":$('meta[name=\"csrf-token\"]').attr('content')},\r\n    url: urlreq,\r\n    method: 'GET',\r\n    dataType: 'JSON', // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    contentType: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    processData: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    cache: false, // http://saravanan.tomrain.com/jquery-ajax-file-upload/\r\n    \r\n    success: function(response, status, xhr) {\r\n      thisinput.next().addClass('hidden'); // on cache le loader de l'input\r\n      searchcustomerresultslist.innerHTML='';\r\n      $('.searchcustomerresults p').empty();\r\n      // console.log(response);\r\n      $('.searchcustomerresults p').append(response.nhits+' résultats' + '<span><small> - Sélectionnez votre client<i style=\"color: #EF6262; font-size:1.125em; position:relative; top:2px;left: 7px;\" class=\"fa fa fa-arrow-circle-down\"></i></small></span><span style=\"float:right\" id=\"reset-search-company\" title=\"Réinitialiser\" class=\"fa fa-times-circle\"></span>');\r\n      $(\"#searchcustomerresultslist\").append('<ul>');\r\n      for(var i=0; i<response.records.length; i++) {\r\n        //console.log(response.records[i].fields.l1_normalisee + ', ' +response.records[i].fields.l4_normalisee + ', ' + response.records[i].fields.l6_normalisee + ', ' + response.records[i].fields.libapet + ' , ' + response.records[i].fields.siren + ' ' + response.records[i].fields.nic);\r\n        //response.records[i].fields.codpos\r\n        var obj = response.records[i].fields;\r\n        var optname;\r\n        var complementaddress;\r\n        var country;\r\n        if(obj.hasOwnProperty('l2_normalisee')) { optname = obj.l2_normalisee;} else {optname='';}\r\n        if(obj.hasOwnProperty('l3_normalisee')) { complementaddress = obj.l3_normalisee;} else {complementaddress='';}\r\n        if(obj.hasOwnProperty('l7_normalisee')) { country = obj.l7_normalisee;} else {country='';}\r\n\r\n        $(\"#searchcustomerresultslist\").append(\r\n          '<li class=\"customerdata-item\" data-clientname=\"'+response.records[i].fields.l1_normalisee+'\"' +\r\n          ' data-clientname=\"'+obj.l1_normalisee+'\"' +\r\n          ' data-optionnalname=\"'+optname+'\"' +\r\n          ' data-clientcomplementaddress=\"'+complementaddress+'\"' +\r\n          ' data-clientaddress=\"'+obj.l4_normalisee+'\"' +\r\n          ' data-clientcp=\"'+obj.codpos+'\"' +\r\n          ' data-clientcity=\"'+obj.libcom+'\"' +\r\n          ' data-clientcountry=\"'+country+'\"' +\r\n          ' data-clientsiret=\"'+obj.siren + obj.nic+'\">' + obj.l1_normalisee + ', ' +obj.l4_normalisee + ', ' + obj.l6_normalisee + '<br><strong>' + response.records[i].fields.libapet + '</strong> , ' + response.records[i].fields.siren + ' ' + response.records[i].fields.nic +'</li>' \r\n          );\r\n      }\r\n      $(\"#searchcustomerresultslist\").append('</ul>');\r\n      //$('.searchcustomerresults').slideDown();\r\n      $('.searchcustomerresults').slideDown();\r\n      $('.customerdata-item').on('click', fillCustomerData);\r\n\r\n      $('#reset-search-company').on('click', function() {\r\n        searchcompany_input.value = \"\";\r\n        searchcompany_city_input.value = \"\";\r\n        $(\"#searchcustomerresultslist\").empty();\r\n        $('.searchcustomerresults').slideUp();\r\n        $('#reset-search-company').off();\r\n      });\r\n    },\r\n    error: function(xhr) {\r\n      // console.log(xhr);\r\n    }\r\n  });\r\n\r\n}, 500); // FIN SET TIMEOUT\r\n\r\n} // FIN ELSE\r\n\r\n}\r\n\r\n// FILL INPUTS FROM SEARCH (WHERE USER CLICK ON CUSTOMER)\r\nfunction fillCustomerData() {\r\n  var client = $(this);\r\n  var clientname = client.data('clientname');\r\n  var clientoptionnalname = client.data('optionnalname');\r\n  var clientsiret = client.data('clientsiret');\r\n  var clientaddress = client.data('clientaddress') + ' ' + client.data('clientcp') + ' ' + client.data('clientcity') + ' ' + client.data('clientcountry');\r\n  var clientlittleaddress = client.data('clientaddress');\r\n  var compadress = client.data('clientcomplementaddress');\r\n  var clientcp = client.data('clientcp');\r\n  var clientcity = client.data('clientcity');\r\n  var clientcountry = client.data('clientcountry');\r\n\r\n  $(\"#searchcustomerresultslist\").empty();\r\n  $('.searchcustomerresults').slideUp();\r\n\r\n  // FILL INPUTS IN STEP1\r\n  $('input[name=\"customername\"]').val(clientname);\r\n  $('input[name=\"customeroptionnalname\"]').val(clientoptionnalname);\r\n  $('input[name=\"siret\"]').val(clientsiret);\r\n  $('#autoaddress').val(clientaddress);\r\n  $('#autoaddress2').val(clientaddress);\r\n\r\n  // FILL INPUTS IN STEP2\r\n  $('input[name=\"complementaddress\"]').val(compadress);\r\n  $('input[name=\"address\"]').val(clientlittleaddress);\r\n  $('input[name=\"cp\"]').val(clientcp);\r\n  $('input[name=\"city\"]').val(clientcity);\r\n  $('input[name=\"country\"]').val(clientcountry);\r\n  $('input[name=\"formatted_address\"]').val(clientaddress);\r\n\r\n  // FILL ADDRESS IN VISUAL MODE IN STEP2\r\n  writeNameFromInputs();\r\n  writeAddressFromInputs()\r\n}\r\n\r\n// FILL NAME IN VISUAL MODE IN STEP2\r\nfunction writeNameFromInputs() {\r\n  let name = $('input[name=\"customername\"]').val();\r\n  let optionnalname = $('input[name=\"customeroptionnalname\"]').val();\r\n  let namedetailslines;\r\n  if(optionnalname.trim()=='') { namedetailslines = name +'<br>';}\r\n  else{namedetailslines = name+' / '+ optionnalname +'<br>';}\r\n  namedetailslines = namedetailslines.toUpperCase();\r\n  // console.log(namedetailslines);\r\n  $('#etiquettenamedetailslines').empty();\r\n  $('#etiquettenamedetailslines').append(namedetailslines);\r\n}\r\n// FILL ADDRESS IN VISUAL MODE IN STEP2\r\nfunction writeAddressFromInputs() {\r\n  let compaddress = $('input[name=\"complementaddress\"]').val();\r\n  let address = $('input[name=\"address\"]').val();\r\n  let cp = $('input[name=\"cp\"]').val();\r\n  let city = $('input[name=\"city\"]').val();\r\n  let country = $('input[name=\"country\"]').val();\r\n  \r\n  var addressdetailslines = address+'<br>'\r\n  + cp + ' ' + city +'<br>'\r\n  + country;\r\n\r\n  $('#etiquetteaddressdetailslines').empty();\r\n  $('#etiquetteaddressdetailslines').append(addressdetailslines);\r\n\r\n  // Si il y a un complément d'adresse\r\n  if(compaddress.trim()!='') {\r\n    $('#etiquettecompadressline').empty();\r\n    $('#etiquettecompadressline').append(compaddress);\r\n  }\r\n  else {\r\n    $('#etiquettecompadressline').empty();\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n  Ecouteurs d'evenement change\r\n**/\r\n\r\nvar customercreate_step1_button = document.querySelector(\"#customercreate-step1-button\");\r\nvar customercreate_step2_button = document.querySelector(\"#customercreate-step2-button\");\r\nvar customercreate_step3_button = document.querySelector(\"#customercreate-step3-button\");\r\n\r\nvar searchcompany_input = document.querySelector(\"#searchcompanyinput\");\r\nvar searchcompany_city_input = document.querySelector(\"#searchcompanycityinput\");\r\nvar searchcompany_button = document.querySelector(\"#searchcompanybutton\");\r\n\r\nvar modify_customeraddresslink = document.querySelector(\"#modifycustomeraddresslink\");\r\n\r\nvar customername_input = $('input[name=\"customername\"]');\r\nvar customeroptionnalname_input = $('input[name=\"customeroptionnalname\"]');\r\n\r\n\r\n\r\nif(searchcompany_input!=null){searchcompany_input.addEventListener('keyup',searchcompanydata );}\r\nif(searchcompany_city_input!=null){searchcompany_city_input.addEventListener('keyup',searchcompanydata );}\r\n\r\nif(customercreate_step1_button!=null){ customercreate_step1_button.addEventListener(\"click\", saveCustomerCompanyData);}\r\nif(customercreate_step2_button!=null){customercreate_step2_button.addEventListener(\"click\", saveCustomerPersoData);}\r\nif(customercreate_step3_button!=null){customercreate_step3_button.addEventListener(\"click\", saveCustomerContactData);}\r\n\r\nif(searchcompany_button) { searchcompany_button.addEventListener('click', searchcompanydata) }\r\n\r\n$('input[name=\"complementaddress\"]').on('keyup', function() {\r\n  let compadress = $(this).val().toUpperCase();\r\n  $('#etiquettecompadressline').html(compadress);\r\n});\r\n\r\nif(customername_input) { customername_input.on('keyup', writeNameFromInputs);\r\nif(customeroptionnalname_input) { customeroptionnalname_input.on('keyup',  writeNameFromInputs) }\r\n/*$('#address-details h4 strong').html($(this).val().toUpperCase());*/\r\n$('input[type=\"text\"]').displayAsUppercase();\r\n\r\n\r\n\r\n}","(function() {\r\n\r\nvar ready = function() {\r\n\r\n/**\r\n  Environnement\r\n  Rôle : Déterminer l'environnement de production ou local\r\n*/\r\nvar env = {\r\n  dev : \"http://localhost:8000/\", \r\n  prod : \"https://facturehero.com/\"\r\n};\r\nvar environnement = env.dev;\r\n\r\n/*$.ajaxSetup({\r\n    headers: {\r\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n});*/\r\n\r\nfunction changeHeadTitle() {\r\n  var classicontitle = $('.sidebar-elements').find('li.active').find('i').attr(\"class\").split(' ')[1];\r\n  var headtitleblock = document.querySelector('.page-head h2');\r\n\r\n  var headtitleicon = document.createElement('i');\r\n  headtitleicon.classList.add('icon');\r\n  headtitleicon.classList.add(classicontitle);\r\n  // Afficher l'icone\r\n  headtitleblock.insertBefore(headtitleicon, headtitleblock.firstChild);\r\n  $(headtitleblock).css('opacity', 1);\r\n}\r\n\r\nchangeHeadTitle();\r\n\r\n/**\r\n  Fonction saveUserCompanyData(e)\r\n  Rôle : fonction de sauvegarde du 1er formaulaire entreprise\r\n*/\r\nfunction saveUserCompanyData(e) {\r\n  e.preventDefault();\r\n\r\n  var formElement = document.getElementById(\"usereditstep1\");\r\n  // console.log(formElement.action);\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  // On crée un objet de la class FormData - bit.ly/js-formdataclass\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token); // Adding extra parameters to form_data \r\n  // console.log(formData);\r\n  \r\n  // On sauvegarde les données avec la function utilities.js/saveWithAjax()\r\n  saveWithAjax(formElement, formData);\r\n\r\n  e.stopPropagation();\r\n} // Fin fonction de sauvegarde du 1er formaulaire entreprise \r\n\r\n\r\nfunction saveUserPersoData(e) {\r\n  e.preventDefault();\r\n  var formElement = document.getElementById(\"usereditstep2\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  // console.log(formData);\r\n\r\n  // On sauvegarde les données\r\n  saveWithAjax(formElement, formData);\r\n  e.stopPropagation();\r\n}\r\n\r\nfunction details(e) {\r\n // e.preventDefault();\r\n}\r\n\r\n \r\nfunction saveUserCompanyIban(elt) {\r\n  elt = elt || null;\r\n  // console.log(elt);\r\n  var formElement = document.getElementById(\"ibanform\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n  var validationresponse = $('.iban-error-container');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  if(elt!=null) { // click sur l'élément button activate du modal iban\r\n    formData.append(\"elt\", 'activatebutton');\r\n  }\r\n  // console.log(formData.get(\"iban\"));\r\n  \r\n  if(formData.get(\"iban\")=='') {\r\n    validationresponse.html(\"<span style='color: #ccc'>Renseignez votre IBAN</span>\");\r\n  }\r\n  else {\r\n    // On sauvegarde les données\r\n    // Si l'IBAN est valide, on le sauvegarde en BDD - isValidIBANNumber() retourne 1 si valide, -1 ou false si invalide\r\n    if(isValidIBANNumber(formData.get(\"iban\"))==1) {\r\n      saveWithAjax(formElement, formData, elt);\r\n      //$('.close').click(); // Fermer la popup\r\n    } \r\n    else{\r\n      validationresponse.hide();\r\n      validationresponse.html(\"<span style='color: #B13535'><i class='fa fa fa-times'></i> Erreur : entrez un IBAN valide</span>\");\r\n      validationresponse.fadeIn();\r\n    }\r\n  }    \r\n}\r\n\r\n\r\nfunction saveUserCompanyCheque(elt) {\r\n  elt = elt || null;\r\n  var formElement = document.getElementById(\"chequeform\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  if(elt!=null) { // click sur l'élément button activate du modal iban\r\n    formData.append(\"elt\", 'activatebutton');\r\n  }\r\n  // console.log(formData.get('elt'));\r\n  saveWithAjax(formElement, formData, elt);\r\n}\r\n\r\n\r\nfunction saveUserCompanyPaypal(elt) {\r\n  elt = elt || null;\r\n  var formElement = document.getElementById(\"paypalform\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  if(elt!=null) { // click sur l'élément button activate du modal iban\r\n    formData.append(\"elt\", 'activatebutton');\r\n  }\r\n  // console.log(formData.get('elt'));\r\n  saveWithAjax(formElement, formData, elt);\r\n}\r\n\r\nfunction saveUserCompanyMoney(thisCheckBoxValue, elt) {\r\n  console.log(elt);\r\n  var formElement = document.getElementById(\"moneyform\");\r\n  var token = $('meta[name=\"csrf-token\"]').attr('content');\r\n\r\n  var formData = new FormData(formElement);\r\n  formData.append(\"_token\", token);\r\n  formData.append(\"checkboxmoney\", thisCheckBoxValue); // True ou false\r\n  // console.log(formData);\r\n  saveWithAjax(formElement, formData, elt);\r\n}\r\n\r\n\r\n/**\r\n  Ecouteurs d'evenement change\r\n**/\r\n\r\nvar useredit_step1_button = document.querySelector(\"#useredit-step1-button\");\r\nvar useredit_step2_button = document.querySelector(\"#useredit-step2-button\");\r\nvar usersave_iban_button = $('#saveIbanButton');\r\n\r\n$('label[for=\"bank-transfer\"]').on('click', details);\r\n\r\nif(useredit_step1_button!=null){ useredit_step1_button.addEventListener(\"click\", saveUserCompanyData);}\r\nif(useredit_step2_button!=null){useredit_step2_button.addEventListener(\"click\", saveUserPersoData);}\r\n\r\n//usersave_iban_button.addEventListener(\"click\", saveUserCompanyIban);\r\n// if(usersave_iban_button!=null) {usersave_iban_button.on('click',saveUserCompanyIban);}\r\n\r\n\r\n$(\"input.iban\").on('keyup', function () {\r\n  var arrayofinputs=$(\"input.iban\");\r\n  var fulliban='';\r\n  var validationresponse = $('.iban-error-container');\r\n  if(typeof this.value == 'string') {this.value = this.value.toUpperCase()};\r\n\r\n  if (this.value.length == this.maxLength) {\r\n    var $next = $(this).next('input.iban');\r\n    if ($next.length)\r\n        $(this).next('input.iban').focus();\r\n    else\r\n        $(this).blur();\r\n  }\r\n  if(arrayofinputs.last().val().length>3) {arrayofinputs.last().val().slice(0, -1)}\r\n\r\n  if(arrayofinputs[0].value != '') {\r\n    for(var i=0; i<arrayofinputs.length; i++) {\r\n      if(arrayofinputs[i].value != '') {\r\n        partiban = arrayofinputs[i].value;\r\n        fulliban+=partiban;\r\n      }\r\n    }\r\n    $('#input-iban-full-b').val(fulliban);\r\n  }\r\n\r\n  if(isValidIBANNumber($('#input-iban-full-b').val())==1) {\r\n    validationresponse.hide();\r\n    validationresponse.html(\"<i style='color:#8DCADF' class='fa fa-check-circle'></i> Ok votre IBAN est validé.\");\r\n    validationresponse.fadeIn();\r\n    saveUserCompanyIban();\r\n  } else {\r\n    validationresponse.html(\"Entrez IBAN valide</small>\");\r\n  }\r\n\r\n});\r\n\r\nfunction dontchangecheckbox(e) {\r\n  var checkboxinput = $(this).find('input');\r\n  console.log(checkboxinput);\r\n  var checkboxinputid = checkboxinput.attr('id');\r\n  var checkboxvalue = checkboxinput.prop(\"checked\"); // true or false\r\n  //console.log($('.'+checkboxinputid+'-activatebutton'));\r\n  \r\n  //console.log('Avant test : ' + checkboxvalue);\r\n  if (checkboxvalue==true) { \r\n   // console.log('Si vrai : ' + checkboxvalue);\r\n   // checkboxinput.prop(\"checked\", true);\r\n  } \r\n  else { \r\n    //console.log('Si faux avant activation check : ' + checkboxvalue);\r\n    checkboxinput.prop(\"checked\", true);\r\n    //console.log('Si faux après activation check : ' + checkboxvalue);\r\n    $('.'+checkboxinputid+'-activatebutton').prop(\"checked\", true);\r\n\r\n    if(checkboxinputid==\"bank-transfer\") {\r\n      saveUserCompanyIban();\r\n    }\r\n    else if(checkboxinputid == \"cheque\") {\r\n      saveUserCompanyCheque();\r\n    }\r\n    else if(checkboxinputid == \"paypal\") {\r\n      saveUserCompanyPaypal();\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction retrieveAndFillIban() {\r\n  var theiban = $('#input-iban-full-b').val();\r\n  if(theiban.trim() != '') \r\n  {\r\n    $('#input-iban1-b').val(theiban.substr(0, 4));\r\n    $('#input-iban2-b').val(theiban.substr(4, 4));\r\n    $('#input-iban3-b').val(theiban.substr(8, 4));\r\n    $('#input-iban4-b').val(theiban.substr(12, 4));\r\n    $('#input-iban5-b').val(theiban.substr(16, 4));\r\n    $('#input-iban6-b').val(theiban.substr(20, 4));\r\n    $('#input-iban7-b').val(theiban.substr(24));\r\n  }   \r\n}\r\n\r\nif($('#input-iban-full-b').length) { retrieveAndFillIban() }\r\n\r\n\r\n\r\n$(\"#reset-iban-b\").on('click', function () {\r\n  $(\"input.iban\").val('');\r\n  $('#input-iban-full-b').val('');\r\n  $('.iban-error-container').html(\"Entrez IBAN valide</small>\");\r\n});\r\n\r\n$('.pagelink').on(\"click\",function(){\r\n  $('.super-loading').removeClass('hidden');\r\n});\r\n\r\n\r\n\r\n$('.am-checkbox-nochange').on('click', dontchangecheckbox);\r\n\r\n\r\n$('#money').on('click', function(e){\r\n  var thisCheckBoxValue = $(this).prop(\"checked\"); // True ou False\r\n  var elt = e.target;\r\n  saveUserCompanyMoney(thisCheckBoxValue, elt); \r\n});\r\n\r\n\r\n// switch bank-transfer\r\n$('.bank-transfer-activatebutton').on('click', function(e){\r\n  var elt = e.target;\r\n  if($('#bank-transfer').prop( \"checked\")==true) {$('#bank-transfer').prop( \"checked\", false ); saveUserCompanyIban(elt);}\r\n  else{$('#bank-transfer').prop( \"checked\", true ); saveUserCompanyIban(elt);}\r\n});\r\n\r\n// switch cheque\r\n$('.cheque-activatebutton').on('click', function(e){\r\n  var elt = e.target;\r\n  if($('#cheque').prop( \"checked\")==true) {$('#cheque').prop( \"checked\", false ); saveUserCompanyCheque(elt);}\r\n  else{$('#cheque').prop( \"checked\", true ); saveUserCompanyCheque(elt)}\r\n});\r\n\r\n// switch paypal\r\n$('.paypal-activatebutton').on('click', function(e){\r\n  var elt = e.target;\r\n  if($('#paypal').prop( \"checked\")==true) {$('#paypal').prop( \"checked\", false ); saveUserCompanyPaypal(elt);}\r\n  else{$('#paypal').prop( \"checked\", true ); saveUserCompanyPaypal(elt)}\r\n});\r\n\r\n// switch paypal\r\n$('.money-activatebutton').on('click', function(e){\r\n  var elt = e.target;\r\n  if($('#money').prop( \"checked\")==true) {$('#paypal').prop( \"checked\", false ); saveUserCompanyMoney(elt);}\r\n  else{$('#money').prop( \"checked\", true ); saveUserCompanyMoney(elt)}\r\n});\r\n\r\n\r\n\r\n \r\n\r\n\r\n} // FIN Fonction ready\r\n\r\n\r\nready();\r\n\r\n/*document.addEventListener(\"turbolinks:load\", ready);*/\r\n\r\n\r\n\r\n\r\n })();\r\n\r\n"]}